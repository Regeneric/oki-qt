(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{41:function(e,t,a){e.exports=a.p+"static/media/active.70a30529.png"},42:function(e,t,a){e.exports=a.p+"static/media/coming-soon.8d0c74af.png"},43:function(e,t,a){e.exports=a.p+"static/media/done.762d769c.png"},44:function(e,t,a){e.exports=a(78)},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){e.exports=a.p+"static/media/itc-logo.ddb11daf.png"},75:function(e,t,a){e.exports=a.p+"static/media/active_list.3fbab570.png"},78:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(39),o=a.n(s),r=a(3),c=a.n(r),u=a(6),l=a(12),m=(a(65),a(66),a(67),a(68),a(2)),d=a.n(m),p=a(5),h=a(8),g=a(9),b=a(4),f=a(11),k=a(10),y=a(1),x=a.n(y),w=(a(70),function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).onClickMenuToggle=n.onClickMenuToggle.bind(Object(b.a)(n)),n.state={hamburger:!1,domain:"oki.org.pl"},n}return Object(g.a)(a,[{key:"onClickMenuToggle",value:function(e){this.setState({hamburger:!this.state.hamburger})}},{key:"button",value:function(){return this.state.hamburger?i.a.createElement("button",{className:"menu-toggler active",type:"button",onClick:this.onClickMenuToggle},i.a.createElement("span",null),i.a.createElement("span",null),i.a.createElement("span",null)):i.a.createElement("button",{className:"menu-toggler",type:"button",onClick:this.onClickMenuToggle},i.a.createElement("span",null),i.a.createElement("span",null),i.a.createElement("span",null))}},{key:"menu",value:function(){var e=this.state.domain;return!this.state.hamburger||null==x.a.get("userName")&&null==x.a.get("token")?this.state.hamburger||null==x.a.get("userName")&&null==x.a.get("token")?!this.state.hamburger||null!=x.a.get("userName")&&null!=x.a.get("token")?this.state.hamburger||null!=x.a.get("userName")&&null!=x.a.get("token")?void 0:i.a.createElement("section",{className:"navbar-right"},i.a.createElement("div",{className:"navbar-item"},i.a.createElement(u.b,{to:"/"},"Strona G\u0142\xf3wna")),i.a.createElement("div",{className:"navbar-item"},i.a.createElement(u.b,{to:"/quiz/find/"},"Znajd\u017a Quiz")),i.a.createElement("div",{className:"navbar-item"},i.a.createElement(u.b,{to:"/quiz/add/"},"Stw\xf3rz Quiz")),i.a.createElement("div",{className:"navbar-item"},i.a.createElement("a",{href:"https://zadania.oki.org.pl"},"Zadania")),i.a.createElement("div",{className:"navbar-item"},i.a.createElement(u.b,{to:"/login"},"Logowanie"))):i.a.createElement("section",{className:"navbar-right active"},i.a.createElement("div",{className:"navbar-item"},i.a.createElement(u.b,{to:"/"},"Strona G\u0142\xf3wna")),i.a.createElement("div",{className:"navbar-item"},i.a.createElement(u.b,{to:"/quiz/find/"},"Znajd\u017a Quiz")),i.a.createElement("div",{className:"navbar-item"},i.a.createElement(u.b,{to:"/quiz/add/"},"Stw\xf3rz Quiz")),i.a.createElement("div",{className:"navbar-item"},i.a.createElement("a",{href:"https://zadania.oki.org.pl"},"Zadania")),i.a.createElement("div",{className:"navbar-item"},i.a.createElement(u.b,{to:"/login"},"Logowanie"))):i.a.createElement("section",{className:"navbar-right"},i.a.createElement("div",{className:"navbar-item"},i.a.createElement(u.b,{to:"/"},"Strona G\u0142\xf3wna")),i.a.createElement("div",{className:"navbar-item"},i.a.createElement(u.b,{to:"/quiz/find/"},"Znajd\u017a Quiz")),i.a.createElement("div",{className:"navbar-item"},i.a.createElement(u.b,{to:"/quiz/add/"},"Stw\xf3rz Quiz")),i.a.createElement("div",{className:"navbar-item"},i.a.createElement("a",{href:"https://zadania.oki.org.pl"},"Zadania")),i.a.createElement("div",{className:"navbar-item",style:{cursor:"pointer"},onClick:Object(p.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.get("/users?userName="+x.a.get("userName")+"&api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){return e.data[0]._id})).catch((function(e){return e}));case 2:a=t.sent,x.a.remove("userName",{domain:e}),x.a.remove("token",{domain:e}),c.a.put("/users/update/"+a+"?api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3",{isLogged:!1}).then((function(e){200===e.status&&(window.location="/")})).catch((function(e){return e}));case 6:case"end":return t.stop()}}),t)})))},"Wyloguj")):i.a.createElement("section",{className:"navbar-right active"},i.a.createElement("div",{className:"navbar-item"},i.a.createElement(u.b,{to:"/"},"Strona G\u0142\xf3wna")),i.a.createElement("div",{className:"navbar-item"},i.a.createElement(u.b,{to:"/quiz/find/"},"Znajd\u017a Quiz")),i.a.createElement("div",{className:"navbar-item"},i.a.createElement(u.b,{to:"/quiz/add/"},"Stw\xf3rz Quiz")),i.a.createElement("div",{className:"navbar-item"},i.a.createElement("a",{href:"https://zadania.oki.org.pl"},"Zadania")),i.a.createElement("div",{className:"navbar-item",style:{cursor:"pointer"},onClick:Object(p.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.get("/users?userName="+x.a.get("userName")+"&api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){return e.data[0]._id})).catch((function(e){return e}));case 2:a=t.sent,x.a.remove("userName",{domain:e}),x.a.remove("token",{domain:e}),c.a.put("/users/update/"+a+"?api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3",{isLogged:!1}).then((function(e){200===e.status&&(window.location="/")})).catch((function(e){return e}));case 6:case"end":return t.stop()}}),t)})))},"Wyloguj"))}},{key:"render",value:function(){return x.a.get("userName"),i.a.createElement("nav",{className:"container-fluid navbar-bar navbar-top"},i.a.createElement("section",{className:"navbar-left"}),this.menu(),this.button())}}]),a}(n.Component)),v=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement("form",{className:"d-flex flex-column align-items-center mt-5 pt-5 search-form",style:{height:"100vh"},onSubmit:this.onSubmit},i.a.createElement("h2",{className:"mt-3 text-dark"},"Nie ma takiej strony :c"))}}]),a}(n.Component),q=(n.Component,a(41)),C=a.n(q),z=a(42),E=a.n(z),N=a(43),S=a.n(N),j=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){return Object(h.a)(this,a),t.call(this,e)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement("main",null,i.a.createElement("div",{className:"content-container"},i.a.createElement("div",{className:"quiz-card"},i.a.createElement(u.b,{to:"/quizes/active/"},i.a.createElement("img",{className:"quiz-img",src:C.a}),i.a.createElement("div",{className:"quiz-meta",id:"active"},i.a.createElement("span",{className:"text-dark"},"Aktywne Obecnie")))),i.a.createElement("div",{className:"quiz-card"},i.a.createElement(u.b,{to:"/quizes/coming-soon/"},i.a.createElement("div",{className:"quiz-meta",id:"coming"},i.a.createElement("span",{className:"text-dark"},"Przysz\u0142e")),i.a.createElement("img",{className:"quiz-img",src:E.a}))),i.a.createElement("div",{className:"quiz-card"},i.a.createElement(u.b,{to:"/quizes/completed/"},i.a.createElement("img",{className:"quiz-img",src:S.a}),i.a.createElement("div",{className:"quiz-meta",id:"expired"},i.a.createElement("span",{className:"text-dark"},"Zako\u0144czone"))))))}}]),a}(n.Component),A=a(13),O=(a(75),function(e){return"true"===e.state.isAdmin?i.a.createElement("section",{className:"d-flex flex-column align-items-center p-2 py-4 mx-auto my-1 mt-4 quiz-card-show",style:{backgroundColor:e.bg,color:"black",borderRadius:"6px",fontWeight:e.fwl}},i.a.createElement("h2",{style:{color:e.fg}},e.quiz.quizAuthor," - ",e.quiz.quizCategory),i.a.createElement(u.b,{className:"p-3 text-center",to:"/quiz/show/"+e.quiz._id,style:{color:e.fg}},e.quiz.quizDesc.length>320?e.quiz.quizDesc.replace(/^(.{320}[^\s]*).*/,"$1")+"...":e.quiz.quizDesc.replace(/^(.{320}[^\s]*).*/,"$1")),i.a.createElement("div",{className:"active-action-buttons"},i.a.createElement(u.b,{className:"btn btn-primary text-dark action-button",to:"/quiz/show/"+e.quiz._id,style:{backgroundColor:e.btng}},"We\u017a udzia\u0142"),i.a.createElement(u.b,{className:"btn btn-warning action-button",to:"/ranking/"+e.quiz._id},"Zobacz ranking"),i.a.createElement(u.b,{className:"btn btn-success action-button text-dark",to:"/quiz/edit/"+e.quiz._id},"Edytuj quiz"),i.a.createElement("button",{className:"btn btn-danger action-button",onClick:function(){return e.onClickQuizRemove(e.quiz._id)}},"Usu\u0144 quiz"))):e.quiz.quizStartDate>(new Date).toISOString()?i.a.createElement("section",null,i.a.createElement("section",{className:"d-flex flex-column align-items-center p-2 py-4 mx-auto my-1 mt-4 quiz-card-show",style:{backgroundColor:e.bg,color:"black",borderRadius:"6px",fontWeight:e.fwl}},i.a.createElement("h2",{style:{color:e.fg}},e.quiz.quizAuthor," - ",e.quiz.quizCategory),i.a.createElement(u.b,{className:"p-3 text-center",to:"/quiz/show/"+e.quiz._id,style:{color:e.fg}},e.quiz.quizDesc.length>320?e.quiz.quizDesc.replace(/^(.{320}[^\s]*).*/,"$1")+"...":e.quiz.quizDesc.replace(/^(.{320}[^\s]*).*/,"$1")),i.a.createElement("div",null,i.a.createElement(u.b,{className:"btn btn-primary text-dark",to:"/quiz/show/"+e.quiz._id,style:{backgroundColor:e.btng}},"We\u017a udzia\u0142")),i.a.createElement("p",{className:"mt-4",style:{color:e.fg}},"Ranking dost\u0119pny od dnia ",e.quiz.quizStartDate.substring(0,10)))):e.quiz.quizEndDate<(new Date).toISOString()?i.a.createElement("section",{className:"d-flex flex-column align-items-center p-2 py-4 mx-auto my-1 mt-4 quiz-card-show",style:{backgroundColor:e.bg,color:"black",borderRadius:"6px",fontWeight:e.fwl}},i.a.createElement("h2",{style:{color:e.fg}},e.quiz.quizAuthor," - ",e.quiz.quizCategory),i.a.createElement(u.b,{className:"p-3 text-center",to:"/ranking/"+e.quiz._id,style:{color:e.fg}},e.quiz.quizDesc.length>320?e.quiz.quizDesc.replace(/^(.{320}[^\s]*).*/,"$1")+"...":e.quiz.quizDesc.replace(/^(.{320}[^\s]*).*/,"$1")),i.a.createElement("div",null,i.a.createElement(u.b,{className:"btn btn-warning ml-2",to:"/ranking/"+e.quiz._id},"Zobacz ranking")),i.a.createElement("p",{className:"mt-4",style:{color:e.fg}},"Quiz zako\u0144czy\u0142 si\u0119 dnia ",e.quiz.quizEndDate.substring(0,10))):e.quiz.quizStartDate<=(new Date).toISOString()&&e.quiz.quizEndDate>=(new Date).toISOString()&&e.quiz.quizAuthor===x.a.get("userName")?i.a.createElement("section",{className:"d-flex flex-column align-items-center p-2 py-4 mx-auto my-1 mt-4 quiz-card-show",style:{backgroundColor:e.bg,color:"black",borderRadius:"6px",fontWeight:e.fwl}},i.a.createElement("h2",{style:{color:e.fg}},e.quiz.quizAuthor," - ",e.quiz.quizCategory),i.a.createElement(u.b,{className:"p-3 text-center",to:"/quiz/show/"+e.quiz._id,style:{color:e.fg}},e.quiz.quizDesc.length>320?e.quiz.quizDesc.replace(/^(.{320}[^\s]*).*/,"$1")+"...":e.quiz.quizDesc.replace(/^(.{320}[^\s]*).*/,"$1")),i.a.createElement("div",{className:"active-action-buttons"},i.a.createElement(u.b,{className:"btn btn-primary text-dark action-button",to:"/quiz/show/"+e.quiz._id,style:{backgroundColor:e.btng}},"We\u017a udzia\u0142"),i.a.createElement(u.b,{className:"btn btn-warning action-button",to:"/ranking/"+e.quiz._id},"Zobacz ranking"),i.a.createElement(u.b,{className:"btn btn-success action-button text-dark",to:"/quiz/edit/"+e.quiz._id},"Edytuj quiz"),i.a.createElement("button",{className:"btn btn-danger action-button",onClick:function(){return e.onClickQuizRemove(e.quiz._id)}},"Usu\u0144 quiz"))):i.a.createElement("section",{className:"d-flex flex-column align-items-center p-2 py-4 mx-auto my-1 mt-4 quiz-card-show",style:{backgroundColor:e.bg,color:"black",borderRadius:"6px",fontWeight:e.fwl}},i.a.createElement("h2",{style:{color:e.fg}},e.quiz.quizAuthor," - ",e.quiz.quizCategory),i.a.createElement(u.b,{className:"p-3 text-center",to:"/quiz/show/"+e.quiz._id,style:{color:e.fg}},e.quiz.quizDesc.length>320?e.quiz.quizDesc.replace(/^(.{320}[^\s]*).*/,"$1")+"...":e.quiz.quizDesc.replace(/^(.{320}[^\s]*).*/,"$1")),i.a.createElement("div",{className:"active-action-buttons"},i.a.createElement(u.b,{className:"btn btn-primary text-dark action-button",to:"/quiz/show/"+e.quiz._id,style:{backgroundColor:e.btng}},"We\u017a udzia\u0142"),i.a.createElement(u.b,{className:"btn btn-warning action-button",to:"/ranking/"+e.quiz._id},"Zobacz ranking")))}),D=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).changePage=n.changePage.bind(Object(b.a)(n)),n.nextPage=n.nextPage.bind(Object(b.a)(n)),n.previousPage=n.previousPage.bind(Object(b.a)(n)),n.onClickQuizRemove=n.onClickQuizRemove.bind(Object(b.a)(n)),n.pages=n.pages.bind(Object(b.a)(n)),n.state={active:[],page:1,pageCount:0,allPages:[],cnt:0,isAdmin:!1},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=(t=(t=this.props.history.location.search)[t.length-1])&&this.setState({page:t}),e.next=5,c.a.get("/quizes?page=".concat(t,"&isPublic=true&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizStartDate<=(new Date).toISOString()&&e.quizEndDate>=(new Date).toISOString()}));t.length>1&&t.sort((function(e,t){return e.lastTake>t.lastTake?-1:1})),n.setState({active:t,pageCount:e.data.pageCount})})).catch((function(e){return e}));case 5:a=Object(A.a)(Array(this.state.pageCount).keys()),this.setState({allPages:a}),c.a.get("/users?userName=".concat(x.a.get("userName"),"&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){n.setState({isAdmin:e.data[0].isAdmin})})).catch((function(e){return e}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"activeList",value:function(){var e=this;return this.state.active.map((function(t,a){return 1&a?i.a.createElement(O,{state:e.state,quiz:t,key:t._id,onClickQuizRemove:e.onClickQuizRemove,bg:"#f55072",btng:"#78d7d6",fg:"white",btngd:"#4d3ec2",fwl:"bold",ip:"right"}):i.a.createElement(O,{state:e.state,quiz:t,key:t._id,onClickQuizRemove:e.onClickQuizRemove,bg:"#78d7d6",btng:"#f55072",fg:"black",btngd:"#dc3545",ip:"left"})}))}},{key:"onClickQuizRemove",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=window.confirm("Na pewno?")){e.next=5;break}return e.next=3,c.a.delete("/quizes/remove/".concat(t,"?api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3"),{headers:{Authorization:"JWT ".concat(x.a.get("token"))}}).then((function(e){return e})).catch((function(e){return e}));case 3:e.next=6;break;case 5:alert("Wpis nie zosta\u0142 usuni\u0119ty.");case 6:null!=(a=(a=this.props.history.location.search)[a.length-1])&&this.setState({page:a}),c.a.get("/quizes?page=".concat(a,"&isPublic=true&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizStartDate<=(new Date).toISOString()&&e.quizEndDate>=(new Date).toISOString()}));t.length>1&&(t=t.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),n.setState({active:t,pageCount:e.data.pageCount})})).catch((function(e){return e}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"previousPage",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=parseInt(this.state.page))>1&&a--,e.next=4,c.a.get("/quizes?page=".concat(a,"&isPublic=true&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizStartDate<=(new Date).toISOString()&&e.quizEndDate>=(new Date).toISOString()}));t.length>1&&(t=t.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),n.setState({active:t,page:a})})).catch((function(e){return e}));case 4:window.history.replaceState("/quizes/active/","Quiz OKI","/quizes/active?page=".concat(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nextPage",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=parseInt(this.state.page))<this.state.pageCount&&a++,e.next=4,c.a.get("/quizes?page=".concat(a,"&isPublic=true&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizStartDate<=(new Date).toISOString()&&e.quizEndDate>=(new Date).toISOString()}));t.length>1&&(t=t.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),n.setState({active:t,page:a})})).catch((function(e){return e}));case 4:window.history.replaceState("/quizes/active/","Quiz OKI","/quizes/active?page=".concat(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changePage",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=parseInt(t.target.innerHTML),e.next=3,c.a.get("/quizes?page=".concat(a,"&isPublic=true&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizStartDate<=(new Date).toISOString()&&e.quizEndDate>=(new Date).toISOString()}));t.length>1&&(t=t.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),n.setState({active:t,page:a})})).catch((function(e){return e}));case 3:window.history.replaceState("/quizes/active/","Quiz OKI","/quizes/active?page=".concat(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"pages",value:function(){var e=this;if(this.state.pageCount>1){return(this.state.page<9?this.state.allPages.slice(0,this.state.page+9):this.state.allPages.slice(this.state.page-1,this.state.page+9)).map((function(t){return e.state.page==t+1?i.a.createElement("p",{onClick:e.changePage,style:{borderTop:"3px solid black",color:"#fdd420",fontWeight:"bold"}},t+1):i.a.createElement("p",{className:"mx-3",onClick:e.changePage},t+1)}))}}},{key:"render",value:function(){return this.state.active.length<=0?i.a.createElement("main",null,i.a.createElement("div",{className:"list-container"},i.a.createElement("h3",{className:"text-center mt-5"},"Nic tu jeszcze nie ma :c"))):i.a.createElement("main",null,i.a.createElement("div",{className:"list-container"},this.activeList(),i.a.createElement("div",{className:"d-flex justify-content-center mt-3 pagination"},this.state.page>1?i.a.createElement("p",{type:"button",onClick:this.previousPage,style:{cursor:"pointer"}},"\xab Poprzednia"):this.state.pageCount>1?i.a.createElement("p",{onClick:function(){console.log("Nope")},className:"nohover",style:{cursor:"default",color:"grey"}},"\xab Poprzednia"):null,this.pages(),this.state.page<this.state.pageCount?i.a.createElement("p",{onClick:this.nextPage,style:{cursor:"pointer"}},"Nast\u0119pna \xbb"):this.state.pageCount>1?i.a.createElement("p",{onClick:function(){console.log("Nope")},className:"nohover",style:{cursor:"default",color:"grey"}},"Nast\u0119pna \xbb"):null)))}}]),a}(n.Component),Q=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).onClickQuizRemove=n.onClickQuizRemove.bind(Object(b.a)(n)),n.state={comingSoon:[],isAdmin:!1},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/quizes?isPublic=true&api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){var a=e.data.quizes.filter((function(e){return e.quizStartDate>(new Date).toISOString()}));a.length>1&&(a=a.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),t.setState({comingSoon:a})})).catch((function(e){return e}));case 2:c.a.get("/users?userName=".concat(x.a.get("userName"),"&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){t.setState({isAdmin:e.data[0].isAdmin})})).catch((function(e){return e}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"comingSoonList",value:function(){var e=this;return this.state.comingSoon.map((function(t,a){return 1&a?i.a.createElement(O,{state:e.state,quiz:t,key:t._id,onClickQuizRemove:e.onClickQuizRemove,bg:"#f55072",btng:"#78d7d6",fg:"white",btngd:"#4d3ec2",fwl:"bold",ip:"right"}):i.a.createElement(O,{state:e.state,quiz:t,key:t._id,onClickQuizRemove:e.onClickQuizRemove,bg:"#78d7d6",btng:"#f55072",fg:"black",btngd:"#dc3545",ip:"left"})}))}},{key:"onClickQuizRemove",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=window.confirm("Na pewno?")){e.next=5;break}return e.next=3,c.a.delete("/quizes/remove/".concat(t,"?api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3"),{headers:{Authorization:"JWT ".concat(x.a.get("token"))}}).then((function(e){return e})).catch((function(e){return e}));case 3:e.next=6;break;case 5:alert("Wpis nie zosta\u0142 usuni\u0119ty.");case 6:null!=(a=(a=this.props.history.location.search)[a.length-1])&&this.setState({page:a}),c.a.get("/quizes?page=".concat(a,"&isPublic=true&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizStartDate<=(new Date).toISOString()&&e.quizEndDate>=(new Date).toISOString()}));t.length>1&&(t=t.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),n.setState({comingSoon:t,pageCount:e.data.pageCount})})).catch((function(e){return e}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"previousPage",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=parseInt(this.state.page))>1&&a--,e.next=4,c.a.get("/quizes?page=".concat(a,"&isPublic=true&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizStartDate>(new Date).toISOString()}));t.length>1&&(t=t.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),n.setState({comingSoon:t,page:a})})).catch((function(e){return e}));case 4:window.history.replaceState("/quizes/coming-soon/","Quiz OKI","/quizes/coming-soon?page=".concat(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nextPage",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=parseInt(this.state.page))<this.state.pageCount&&a++,e.next=4,c.a.get("/quizes?page=".concat(a,"&isPublic=true&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizStartDate>(new Date).toISOString()}));t.length>1&&(t=t.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),n.setState({comingSoon:t,page:a})})).catch((function(e){return e}));case 4:window.history.replaceState("/quizes/coming-soon/","Quiz OKI","/quizes/coming-soon?page=".concat(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changePage",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=parseInt(t.target.innerHTML),e.next=3,c.a.get("/quizes?page=".concat(a,"&isPublic=true&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizStartDate>(new Date).toISOString()}));t.length>1&&(t=t.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),n.setState({comingSoon:t,page:a})})).catch((function(e){return e}));case 3:window.history.replaceState("/quizes/coming-soon/","Quiz OKI","/quizes/coming-soon?page=".concat(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"pages",value:function(){var e=this;if(this.state.pageCount>1){return(this.state.page<9?this.state.allPages.slice(0,this.state.page+9):this.state.allPages.slice(this.state.page-1,this.state.page+9)).map((function(t){return e.state.page==t+1?i.a.createElement("p",{onClick:e.changePage,style:{borderTop:"3px solid black",color:"#fdd420",fontWeight:"bold"}},t+1):i.a.createElement("p",{className:"mx-3",onClick:e.changePage},t+1)}))}}},{key:"render",value:function(){return this.state.comingSoon.length<=0?i.a.createElement("main",null,i.a.createElement("div",{className:"list-container"},i.a.createElement("h3",{className:"text-center mt-5"},"Nic tu jeszcze nie ma :c"))):i.a.createElement("main",null,i.a.createElement("div",{className:"list-container"},this.comingSoonList(),i.a.createElement("div",{className:"d-flex justify-content-center mt-3 pagination"},this.state.page>1?i.a.createElement("p",{type:"button",onClick:this.previousPage,style:{cursor:"pointer"}},"\xab Poprzednia"):this.state.pageCount>1?i.a.createElement("p",{onClick:function(){console.log("Nope")},className:"nohover",style:{cursor:"default",color:"grey"}},"\xab Poprzednia"):null,this.pages(),this.state.page<this.state.pageCount?i.a.createElement("p",{onClick:this.nextPage,style:{cursor:"pointer"}},"Nast\u0119pna \xbb"):this.state.pageCount>1?i.a.createElement("p",{onClick:function(){console.log("Nope")},className:"nohover",style:{cursor:"default",color:"grey"}},"Nast\u0119pna \xbb"):null)))}}]),a}(n.Component),P=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).onClickQuizRemove=n.onClickQuizRemove.bind(Object(b.a)(n)),n.state={expired:[],isAdmin:!1},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/quizes?isPublic=true&api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){var a=e.data.quizes.filter((function(e){return e.quizEndDate<(new Date).toISOString()}));a.length>1&&(a=a.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),t.setState({expired:a})})).catch((function(e){return e}));case 2:c.a.get("/users?userName=".concat(x.a.get("userName"),"&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){t.setState({isAdmin:e.data[0].isAdmin})})).catch((function(e){return e}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"expiredList",value:function(){var e=this;return this.state.expired.map((function(t,a){return 1&a?i.a.createElement(O,{state:e.state,quiz:t,key:t._id,onClickQuizRemove:e.onClickQuizRemove,bg:"#f55072",btng:"#78d7d6",fg:"white",btngd:"#4d3ec2",fwl:"bold",ip:"right"}):i.a.createElement(O,{state:e.state,quiz:t,key:t._id,onClickQuizRemove:e.onClickQuizRemove,bg:"#78d7d6",btng:"#f55072",fg:"black",btngd:"#dc3545",ip:"left"})}))}},{key:"onClickQuizRemove",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=window.confirm("Na pewno?")){e.next=5;break}return e.next=3,c.a.delete("/quizes/remove/".concat(t,"?api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3"),{headers:{Authorization:"JWT ".concat(x.a.get("token"))}}).then((function(e){return e})).catch((function(e){return e}));case 3:e.next=6;break;case 5:alert("Wpis nie zosta\u0142 usuni\u0119ty.");case 6:null!=(a=(a=this.props.history.location.search)[a.length-1])&&this.setState({page:a}),c.a.get("/quizes?page=".concat(a,"&isPublic=true&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizStartDate<=(new Date).toISOString()&&e.quizEndDate>=(new Date).toISOString()}));t.length>1&&(t=t.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),n.setState({expired:t,pageCount:e.data.pageCount})})).catch((function(e){return e}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"previousPage",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=parseInt(this.state.page))>1&&a--,e.next=4,c.a.get("/quizes?page=".concat(a,"&isPublic=true&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizEndDate<(new Date).toISOString()}));t.length>1&&(t=t.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),n.setState({expired:t,page:a})})).catch((function(e){return e}));case 4:window.history.replaceState("/quizes/completed/","Quiz OKI","/quizes/completed?page=".concat(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nextPage",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=parseInt(this.state.page))<this.state.pageCount&&a++,e.next=4,c.a.get("/quizes?page=".concat(a,"&isPublic=true&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizEndDate<(new Date).toISOString()}));t.length>1&&(t=t.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),n.setState({expired:t,page:a})})).catch((function(e){return e}));case 4:window.history.replaceState("/quizes/completed/","Quiz OKI","/quizes/completed?page=".concat(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changePage",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=parseInt(t.target.innerHTML),e.next=3,c.a.get("/quizes?page=".concat(a,"&isPublic=true&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizEndDate<(new Date).toISOString()}));t.length>1&&(t=t.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),n.setState({expired:t,page:a})})).catch((function(e){return e}));case 3:window.history.replaceState("/quizes/completed/","Quiz OKI","/quizes/completed?page=".concat(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"pages",value:function(){var e=this;if(this.state.pageCount>1){return(this.state.page<9?this.state.allPages.slice(0,this.state.page+9):this.state.allPages.slice(this.state.page-1,this.state.page+9)).map((function(t){return e.state.page==t+1?i.a.createElement("p",{onClick:e.changePage,style:{borderTop:"3px solid black",color:"#fdd420",fontWeight:"bold"}},t+1):i.a.createElement("p",{className:"mx-3",onClick:e.changePage},t+1)}))}}},{key:"render",value:function(){return this.state.expired.length<=0?i.a.createElement("main",null,i.a.createElement("div",{className:"list-container"},i.a.createElement("h3",{className:"mt-5 text-center mt-5"},"Nic tu jeszcze nie ma :c"))):i.a.createElement("main",null,i.a.createElement("div",{className:"list-container"},this.expiredList(),i.a.createElement("div",{className:"d-flex justify-content-center mt-3 pagination"},this.state.page>1?i.a.createElement("p",{type:"button",onClick:this.previousPage,style:{cursor:"pointer"}},"\xab Poprzednia"):this.state.pageCount>1?i.a.createElement("p",{onClick:function(){console.log("Nope")},className:"nohover",style:{cursor:"default",color:"grey"}},"\xab Poprzednia"):null,this.pages(),this.state.page<this.state.pageCount?i.a.createElement("p",{onClick:this.nextPage,style:{cursor:"pointer"}},"Nast\u0119pna \xbb"):this.state.pageCount>1?i.a.createElement("p",{onClick:function(){console.log("Nope")},className:"nohover",style:{cursor:"default",color:"grey"}},"Nast\u0119pna \xbb"):null)))}}]),a}(n.Component),I=a(21),_=a(22),B=function(e){if("make"===e.page){if(!e.question.anB&&!e.question.anC&&!e.question.anD&&e.question.isOpen)return i.a.createElement("section",{className:"d-flex flex-column align-items-center my-3 question-section"},i.a.createElement("div",{className:"text-dark p-3 mb-2 d-flex flex-column align-items-center question-box",style:{border:"none",backgroundColor:"#fdd400",boxShadow:"2px 2px 2px black"}},i.a.createElement("div",{className:"text-center mb-2"},i.a.createElement("h5",{className:"m-0"},e.question.category)),i.a.createElement("p",{className:"m-0 text-center"},e.question.text),i.a.createElement(I.a,{icon:_.a,style:{cursor:e.cursor,color:e.faColor,marginTop:"10px"},onClick:function(){e.deleteQuestion(e.question.id,e.question.new)}})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anA,i.a.createElement("input",{type:"checkbox",name:e.question.anA,onChange:function(t){e.markAnswer(e.question.id,e.question.anA,t)},checked:Array.from(e.question.correct).some((function(t){return t===e.question.anA}))})));if(!e.question.anC&&!e.question.anD)return i.a.createElement("section",{className:"d-flex flex-column align-items-center my-3 question-section"},i.a.createElement("div",{className:"text-dark p-3 mb-2 d-flex flex-column align-items-center question-box",style:{border:"none",backgroundColor:"#fdd400",boxShadow:"2px 2px 2px black"}},i.a.createElement("div",{className:"text-center mb-2"},i.a.createElement("h5",{className:"m-0"},e.question.category)),i.a.createElement("p",{className:"m-0 text-center"},e.question.text),i.a.createElement(I.a,{icon:_.a,style:{cursor:e.cursor,color:e.faColor,marginTop:"10px"},onClick:function(){e.deleteQuestion(e.question.id,e.question.new)}})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anA,i.a.createElement("input",{type:"checkbox",name:e.question.anA,onChange:function(t){e.markAnswer(e.question.id,e.question.anA,t)},checked:Array.from(e.question.correct).some((function(t){return t===e.question.anA}))})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anB,i.a.createElement("input",{type:"checkbox",name:e.question.anB,onChange:function(t){e.markAnswer(e.question.id,e.question.anB,t)},checked:Array.from(e.question.correct).some((function(t){return t===e.question.anB}))})));if(e.question.anC&&!e.question.anD)return i.a.createElement("section",{className:"d-flex flex-column align-items-center my-3 question-section"},i.a.createElement("div",{className:"text-dark p-3 mb-2 d-flex flex-column align-items-center question-box",style:{border:"none",backgroundColor:"#fdd400",boxShadow:"2px 2px 2px black"}},i.a.createElement("div",{className:"text-center mb-2"},i.a.createElement("h5",{className:"m-0"},e.question.category)),i.a.createElement("p",{className:"m-0 text-center"},e.question.text),i.a.createElement(I.a,{icon:_.a,style:{cursor:e.cursor,color:e.faColor,marginTop:"10px"},onClick:function(){e.deleteQuestion(e.question.id,e.question.new)}})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anA,i.a.createElement("input",{type:"checkbox",name:e.question.anA,onChange:function(t){e.markAnswer(e.question.id,e.question.anA,t)},checked:Array.from(e.question.correct).some((function(t){return t===e.question.anA}))})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anB,i.a.createElement("input",{type:"checkbox",name:e.question.anB,onChange:function(t){e.markAnswer(e.question.id,e.question.anB,t)},checked:Array.from(e.question.correct).some((function(t){return t===e.question.anB}))})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anC,i.a.createElement("input",{type:"checkbox",name:e.question.anC,onChange:function(t){e.markAnswer(e.question.id,e.question.anC,t)},checked:Array.from(e.question.correct).some((function(t){return t===e.question.anC}))})));if(!e.question.anC&&e.question.anD)return i.a.createElement("section",{className:"d-flex flex-column align-items-center my-3 question-section"},i.a.createElement("div",{className:"text-dark p-3 mb-2 d-flex flex-column align-items-center question-box",style:{border:"none",backgroundColor:"#fdd400",boxShadow:"2px 2px 2px black"}},i.a.createElement("div",{className:"text-center mb-2"},i.a.createElement("h5",{className:"m-0"},e.question.category)),i.a.createElement("p",{className:"m-0 text-center"},e.question.text),i.a.createElement(I.a,{icon:_.a,style:{cursor:e.cursor,color:e.faColor,marginTop:"10px"},onClick:function(){e.deleteQuestion(e.question.id,e.question.new)}})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anA,i.a.createElement("input",{type:"checkbox",name:e.question.anA,onChange:function(t){e.markAnswer(e.question.id,e.question.anA,t)},checked:Array.from(e.question.correct).some((function(t){return t===e.question.anA}))})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anB,i.a.createElement("input",{type:"checkbox",name:e.question.anB,onChange:function(t){e.markAnswer(e.question.id,e.question.anB,t)},checked:Array.from(e.question.correct).some((function(t){return t===e.question.anB}))})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anD,i.a.createElement("input",{type:"checkbox",name:e.question.anD,onChange:function(t){e.markAnswer(e.question.id,e.question.anD,t)},checked:Array.from(e.question.correct).some((function(t){return t===e.question.anD}))})));if(e.question.anC&&e.question.anD)return i.a.createElement("section",{className:"d-flex flex-column align-items-center my-3 question-section"},i.a.createElement("div",{className:"text-dark p-3 mb-2 d-flex flex-column align-items-center question-box",style:{border:"none",backgroundColor:"#fdd400",boxShadow:"2px 2px 2px black"}},i.a.createElement("div",{className:"text-center mb-2"},i.a.createElement("h5",{className:"m-0"},e.question.category)),i.a.createElement("p",{className:"m-0 text-center"},e.question.text),i.a.createElement(I.a,{icon:_.a,style:{cursor:e.cursor,color:e.faColor,marginTop:"10px"},onClick:function(){e.deleteQuestion(e.question.id,e.question.new)}})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anA,i.a.createElement("input",{type:"checkbox",name:e.question.anA,onChange:function(t){e.markAnswer(e.question.id,e.question.anA,t)},checked:Array.from(e.question.correct).some((function(t){return t===e.question.anA}))})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anB,i.a.createElement("input",{type:"checkbox",name:e.question.anB,onChange:function(t){e.markAnswer(e.question.id,e.question.anB,t)},checked:Array.from(e.question.correct).some((function(t){return t===e.question.anB}))})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anC,i.a.createElement("input",{type:"checkbox",name:e.question.anC,onChange:function(t){e.markAnswer(e.question.id,e.question.anC,t)},checked:Array.from(e.question.correct).some((function(t){return t===e.question.anC}))})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anD,i.a.createElement("input",{type:"checkbox",name:e.question.anD,onChange:function(t){e.markAnswer(e.question.id,e.question.anD,t)},checked:Array.from(e.question.correct).some((function(t){return t===e.question.anD}))})))}else if("take"===e.page){if(e.question.isOpen)return i.a.createElement("section",{className:"d-flex flex-column align-items-center my-3 question-section"},i.a.createElement("div",{className:"text-dark p-3 mb-2 d-flex flex-column align-items-center question-box",style:{border:"none",backgroundColor:"#fdd400",boxShadow:"2px 2px 2px black"}},i.a.createElement("div",{className:"text-center mb-2"},i.a.createElement("h5",{className:"m-0"},e.question.category)),i.a.createElement("p",{className:"m-0 text-center"},e.question.text)),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100 answer-box",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},i.a.createElement("input",{type:"text",className:"w-100",placeholder:"Odpowied\u017a...",name:e.question.anA,onChange:function(t){e.markAnswerOpen(e.question.id,e.question.anA,t)}})));if(!e.question.anC&&!e.question.anD)return i.a.createElement("section",{className:"d-flex flex-column align-items-center my-3 question-section"},i.a.createElement("div",{className:"text-dark p-3 mb-2 d-flex flex-column question-box",style:{border:"none",backgroundColor:"#fdd400",boxShadow:"2px 2px 2px black"}},i.a.createElement("div",{className:"text-center mb-2"},i.a.createElement("h5",{className:"m-0"},e.question.category)),i.a.createElement("p",{className:"m-0 text-center"},e.question.text)),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100 answer-box",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anA,i.a.createElement("input",{type:"checkbox",name:e.question.anA,onChange:function(t){e.markAnswer(e.question.id,e.question.anA,t)}})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100 answer-box",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anB,i.a.createElement("input",{type:"checkbox",name:e.question.anB,onChange:function(t){e.markAnswer(e.question.id,e.question.anB,t)}})));if(e.question.anC&&!e.question.anD)return i.a.createElement("section",{className:"d-flex flex-column align-items-center my-3 question-section"},i.a.createElement("div",{className:"text-dark p-3 mb-2 d-flex flex-column question-box",style:{border:"none",backgroundColor:"#fdd400",boxShadow:"2px 2px 2px black"}},i.a.createElement("div",{className:"text-center mb-2"},i.a.createElement("h5",{className:"m-0"},e.question.category)),i.a.createElement("p",{className:"m-0 text-center"},e.question.text)),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100 answer-box",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anA,i.a.createElement("input",{type:"checkbox",name:e.question.anA,onChange:function(t){e.markAnswer(e.question.id,e.question.anA,t)}})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100 answer-box",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anB,i.a.createElement("input",{type:"checkbox",name:e.question.anB,onChange:function(t){e.markAnswer(e.question.id,e.question.anB,t)}})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100 answer-box",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anC,i.a.createElement("input",{type:"checkbox",name:e.question.anC,onChange:function(t){e.markAnswer(e.question.id,e.question.anC,t)}})));if(!e.question.anC&&e.question.anD)return i.a.createElement("section",{className:"d-flex flex-column align-items-center my-3 question-section"},i.a.createElement("div",{className:"text-dark p-3 mb-2 d-flex flex-column question-box",style:{border:"none",backgroundColor:"#fdd400",boxShadow:"2px 2px 2px black"}},i.a.createElement("div",{className:"text-center mb-2"},i.a.createElement("h5",{className:"m-0"},e.question.category)),i.a.createElement("p",{className:"m-0 text-center"},e.question.text)),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100 answer-box",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anA,i.a.createElement("input",{type:"checkbox",name:e.question.anA,onChange:function(t){e.markAnswer(e.question.id,e.question.anA,t)}})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100 answer-box",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anB,i.a.createElement("input",{type:"checkbox",name:e.question.anB,onChange:function(t){e.markAnswer(e.question.id,e.question.anB,t)}})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100 answer-box",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anD,i.a.createElement("input",{type:"checkbox",name:e.question.anD,onChange:function(t){e.markAnswer(e.question.id,e.question.anD,t)}})));if(e.question.anC&&e.question.anD)return i.a.createElement("section",{className:"d-flex flex-column align-items-center my-3 question-section"},i.a.createElement("div",{className:"text-dark p-3 mb-2 d-flex flex-column question-box",style:{border:"none",backgroundColor:"#fdd400",boxShadow:"2px 2px 2px black"}},i.a.createElement("div",{className:"text-center mb-2"},i.a.createElement("h5",{className:"m-0"},e.question.category)),i.a.createElement("p",{className:"m-0 text-center"},e.question.text)),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100 answer-box",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anA,i.a.createElement("input",{type:"checkbox",name:e.question.anA,onChange:function(t){e.markAnswer(e.question.id,e.question.anA,t)}})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100 answer-box",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anB,i.a.createElement("input",{type:"checkbox",name:e.question.anB,onChange:function(t){e.markAnswer(e.question.id,e.question.anB,t)}})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100 answer-box",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anC,i.a.createElement("input",{type:"checkbox",name:e.question.anC,onChange:function(t){e.markAnswer(e.question.id,e.question.anC,t)}})),i.a.createElement("label",{className:"p-3 text-dark d-flex justify-content-between align-items-center w-100 answer-box",style:{backgroundColor:"#c5c6c6",boxShadow:"2px 2px 2px black"}},e.question.anD,i.a.createElement("input",{type:"checkbox",name:e.question.anD,onChange:function(t){e.markAnswer(e.question.id,e.question.anD,t)}})))}},T=function(e){return e.state.renderDialog&&e.state.quiz.quizStartDate<=(new Date).toISOString()?i.a.createElement("div",{className:"text-light p-3 mt-4 d-flex justify-content-between align-items-center question-section",style:{border:"none",backgroundColor:"#333444",boxShadow:"2px 2px 2px black"}},i.a.createElement("div",null,i.a.createElement("span",{className:"mr-4"},"Zdobyte punkty: ")," ",e.state.points," / ",e.state.questions.length),i.a.createElement("div",{className:"btn btn-success"},i.a.createElement(u.b,{className:"text-dark",to:"/ranking/"+e.id},"Zobacz ranking"))):e.state.renderDialog&&e.state.quiz.quizStartDate>(new Date).toISOString()?i.a.createElement("div",{className:"text-light p-3 mt-4 d-flex justify-content-between align-items-center question-section",style:{border:"none",backgroundColor:"#333444",boxShadow:"2px 2px 2px black"}},i.a.createElement("div",null,i.a.createElement("span",{className:"mr-4"},"Zdobyte punkty: ")," ",e.state.points," / ",e.state.questions.length),i.a.createElement("p",{className:"m-0"},"Ranking dost\u0119pny od dnia ",e.state.quiz.quizStartDate.substring(0,10))):null},L=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).markAnswer=n.markAnswer.bind(Object(b.a)(n)),n.markAnswerOpen=n.markAnswerOpen.bind(Object(b.a)(n)),n.resultDialog=n.resultDialog.bind(Object(b.a)(n)),n.onSubmit=n.onSubmit.bind(Object(b.a)(n)),n.state={quiz:[],id:"",author:"",category:"",desc:"",duration:"",questions:[],takes:0,contributors:[],openAns:[],renderDialog:!1,points:0,isLogged:!1,isActive:!1,sessionID:"",minutes:0,seconds:0,domain:"itcrowd.net.pl"},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/users?userName="+x.a.get("userName")+"&api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){n.setState({isLogged:e.data[0].isLogged,isActive:e.data[0].isActive,sessionID:e.data[0].roomID})})).catch((function(e){window.location="/login"}));case 2:if(!this.state.isLogged||!this.state.isActive||null==x.a.get("token")){e.next=9;break}return e.next=5,c.a.get("/quizes/"+this.props.match.params.id+"?api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){n.setState({quiz:e.data})})).catch((function(e){return e}));case 5:a=this.state.quiz,this.setState({id:a._id,author:a.quizAuthor,category:a.quizCategory,desc:a.quizDesc,duration:a.quizDuration,questions:a.quizQuestions,contributors:a.contributors,takes:a.takes,minutes:window.sessionStorage.getItem(x.a.get("userName")+"minutes"+a._id)>0?window.sessionStorage.getItem(x.a.get("userName")+"minutes"+a._id):a.quizDuration,seconds:window.sessionStorage.getItem(x.a.get("userName")+"seconds"+a._id)>0?window.sessionStorage.getItem(x.a.get("userName")+"seconds"+a._id):0}),e.next=10;break;case 9:window.location="/login";case 10:this.myInterval=setInterval((function(){var e=n.state,t=e.id,a=e.seconds,i=e.minutes;window.sessionStorage.setItem(x.a.get("userName")+"minutes"+t,i),window.sessionStorage.setItem(x.a.get("userName")+"seconds"+t,a),a>0&&n.setState((function(e){return{seconds:e.seconds-1}})),0===a&&(0===i?clearInterval(n.myInterval):n.setState((function(e){return{minutes:e.minutes-1,seconds:59}})))}),1e3);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.myInterval)}},{key:"markAnswer",value:function(e,t,a){var n=this.state.questions,i=Object(A.a)(n).filter((function(t){return t.id===e}));i[0].checked=new Set(i[0].checked),i[0].checked.add(t),a&&!a.target.checked&&i[0].checked.has(a.target.name)&&i[0].checked.delete(a.target.name);var s=n.map((function(e){return e.id})).indexOf(e),o=n;o[s]=i[0],this.setState({questions:o})}},{key:"markAnswerOpen",value:function(e,t,a){this.setState({openAns:{id:e,answer:a.target.value}})}},{key:"onSubmit",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,i,s,o,r,u,l,m=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.state,n=a.questions,i=a.openAns,s=a.domain,o=new Array,n.forEach((function(e){var t={id:e.id,qstBody:e.text,qstAnA:e.anA,qstAnB:e.anB,qstAnC:e.anC||null,qstAnD:e.anD||null,qstCategory:e.category,checked:e.checked?Array.from(e.checked):null,isPublic:e.isPublic,isOpen:e.isOpen,openAns:i};o.push(t)})),!((r=this.state.contributors.length>0?this.state.contributors.filter((function(e){return e.userName===x.a.get("userName")})):0).length>this.state.takes-1)){e.next=9;break}alert("Przekroczy\u0142e\u015b limit pr\xf3b!"),e.next=11;break;case 9:return e.next=11,c.a.post("/answers/check?api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3",o).then((function(e){var t=0;e.data.forEach((function(e){return e.isCorrect?t++:t})),m.setState({points:t,renderDialog:!0})})).catch((function(e){return e}));case 11:u=new Array,"number"!=typeof r?r.length<=this.state.takes-1&&(u=[].concat(Object(A.a)(this.state.contributors),[{userName:x.a.get("userName"),points:this.state.points,time:"".concat(window.sessionStorage.getItem(x.a.get("userName")+"minutes"+this.props.match.params.id),":").concat(window.sessionStorage.getItem(x.a.get("userName")+"seconds"+this.props.match.params.id))}])):u=[{userName:x.a.get("userName"),points:this.state.points,time:"".concat(window.sessionStorage.getItem(x.a.get("userName")+"minutes"+this.props.match.params.id),":").concat(window.sessionStorage.getItem(x.a.get("userName")+"seconds"+this.props.match.params.id))}],l={lastTake:new Date,contributors:u.length>0?u:this.state.contributors},c.a.put("/quizes/update/".concat(this.props.match.params.id,"?api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3"),l,{headers:{Authorization:"JWT ".concat(x.a.get("token"))}}).then((function(e){return e})).catch((function(e){e&&401==e.response.status?(x.a.remove("token",{domain:s}),x.a.remove("userName",{domain:s}),window.location="/login"):console.log("Nope")})),this.setState({minutes:0,seconds:0}),window.sessionStorage.removeItem(x.a.get("userName")+"minutes"+this.props.match.params.id),window.sessionStorage.removeItem(x.a.get("userName")+"seconds"+this.props.match.params.id),window.scrollTo(0,0);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"questionsList",value:function(){var e=this;return this.state.isLogged&&this.state.isActive&&null!=x.a.get("token")?this.state.questions.map((function(t){return i.a.createElement(B,{key:t._id,question:t,markAnswer:e.markAnswer,markAnswerOpen:e.markAnswerOpen,page:"take",showResult:e.state.renderDialog})})):null}},{key:"resultDialog",value:function(){return this.state.isLogged&&this.state.isActive&&null!=x.a.get("token")?i.a.createElement(T,{state:this.state,id:this.props.match.params.id}):null}},{key:"quizButton",value:function(){return this.state.isLogged&&this.state.isActive&&null!=x.a.get("token")?this.state.renderDialog?null:i.a.createElement("button",{type:"submit",name:"quiz-end",className:"btn btn-primary mt-2 mb-4"},"Zako\u0144cz quiz"):null}},{key:"render",value:function(){return this.state.isLogged&&this.state.isActive&&null!=x.a.get("token")?i.a.createElement("div",{className:"d-flex flex-column align-items-center mt-5 pt-5",style:{minHeight:"90.4vh"}},i.a.createElement("h2",{className:"mt-3 text-dark"},this.state.author+" - "+this.state.category),i.a.createElement("div",{className:"d-flex"},0===this.state.minutes&&0===this.state.seconds&&!0===this.state.renderDialog?i.a.createElement("h4",null,"Time's up!"):i.a.createElement("h4",null,this.state.minutes,":",this.state.seconds<10?"0".concat(this.state.seconds):this.state.seconds)),i.a.createElement("form",{className:"d-flex flex-column align-items-center w-100",onSubmit:this.onSubmit},this.resultDialog(),this.questionsList(),this.quizButton())):i.a.createElement("div",{className:"d-flex flex-column align-items-center mt-5 pt-5",style:{minHeight:"86vh"}},i.a.createElement("h2",{className:"mt-3 text-dark"},"Nast\u0119puje przekierowanie na stron\u0119 logowania..."))}}]),a}(n.Component),R=a(20),W=function(e){return""===e.state.quizID||e.state.readyToRender||(window.location="/quiz/show/"+e.state.quizID),e.state.readyToRender&&e.state.quizCategory.length>0&&e.state.quizDesc.length>0?i.a.createElement("span",null,e.inputForm):e.state.quizUpdated?null:i.a.createElement("section",{className:"my-3 text-center"},i.a.createElement("h2",{className:"mb-4 py-3 mb-0 text-light"},"Stw\xf3rz nowy quiz"),i.a.createElement("div",{class:"input-group mt-2"},i.a.createElement("div",{class:"input-group-prepend"},i.a.createElement("div",{class:"input-group-text",id:"login-info"},"?",i.a.createElement("span",{id:"tooltip-login"},"Kategoria"))),i.a.createElement("input",{className:"form form-control",type:"text",placeholder:"Kategoria...",value:e.state.quizCategory,onChange:e.onChangeCategory})),i.a.createElement("div",{className:"d-flex"},i.a.createElement("div",{class:"input-group mt-2"},i.a.createElement("div",{class:"input-group-prepend"},i.a.createElement("div",{class:"input-group-text",id:"login-info"},"?",i.a.createElement("span",{id:"tooltip-login"},"Czas trwania (minuty)"))),i.a.createElement("input",{className:"form form-control t1",type:"number",placeholder:"Czas trwania... (minuty)",value:e.state.quizDuration,onChange:e.onChangeDuration})),i.a.createElement("div",{class:"input-group mt-2 t2"},i.a.createElement("div",{class:"input-group-prepend"},i.a.createElement("div",{class:"input-group-text",id:"login-info"},"?",i.a.createElement("span",{id:"tooltip-login"},"Ilo\u015b\u0107 pr\xf3b"))),i.a.createElement("input",{className:"form form-control",type:"number",placeholder:"Ilo\u015b\u0107 pr\xf3b...",value:e.state.takes,onChange:e.onChangeTakes}))),i.a.createElement("div",{class:"input-group mt-2"},i.a.createElement("div",{class:"input-group-prepend"},i.a.createElement("div",{class:"input-group-text",id:"login-info"},"?",i.a.createElement("span",{id:"tooltip-login"},"Kr\xf3tki opis quizu"))),i.a.createElement("textarea",{className:"form form-control",type:"text",placeholder:"Opis quizu...",value:e.state.quizDesc,onChange:e.onChangeDesc})),i.a.createElement("section",{className:"d-flex justify-content-between mt-2 quiz-setup-dates"},i.a.createElement("div",{className:"d-flex flex-column align-items-center"},i.a.createElement("p",{className:"text-light mt-3"},"Data rozpocz\u0119cia"),i.a.createElement("input",{className:"form-control",type:"date",onChange:e.onChangeStartDate})),i.a.createElement("div",{className:"d-flex flex-column align-items-center"},i.a.createElement("p",{className:"text-light mt-3"},"Data zako\u0144czenia"),i.a.createElement("input",{className:"form-control",type:"date",onChange:e.onChangeEndDate}))),i.a.createElement("section",{className:"d-flex flex-column align-items-center"},i.a.createElement("div",{className:"d-flex flex-column align-items-center"},i.a.createElement("p",{className:"text-light mt-4"},"Quiz publiczny"),i.a.createElement("input",{type:"checkbox",checked:e.state.quizIsPublic,className:"checkbox mb-3",onChange:e.onClickIsPublic})),i.a.createElement("button",{type:"button",className:"btn btn-primary mt-4",onClick:e.onClickReadyToRender},"Dalej")))},U=function(e){var t=function(){var t=e.state.publicQuestions.map((function(e){return e.qstCategory}));return t=Object(A.a)(new Set(t)),i.a.createElement("select",{className:"form-control mt-4 quiz-input-form-right",onChange:e.onChangeCategory},i.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Wybierz kategori\u0119"),t.map((function(e){return e.length>50?i.a.createElement("option",null,e.replace(/^(.{50}[^\s]*).*/,"$1")+"..."):i.a.createElement("option",null,e.replace(/^(.{50}[^\s]*).*/,"$1"))})))},a=function(){var t=e.state.publicQuestions.filter((function(e,t,a){return a.map((function(e){return e.qstBody})).indexOf(e.qstBody)==t}));return i.a.createElement("select",{className:"form-control mt-2 quiz-input-form-right",onChange:e.onChangePublicQuestion},i.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Wybierz pytanie"),t.map((function(t){return t.qstCategory===e.state.category?i.a.createElement("option",{title:t.qstBody},t.qstBody.replace(/^(.{45}[^\s]*).*/,"$1")):null})))};return e.state.isQuestionOpen?i.a.createElement("section",{className:"d-flex flex-column align-items-center"},i.a.createElement("section",{className:"my-3 d-flex"},i.a.createElement("section",{className:"mx-3 text-center"},i.a.createElement("input",{className:"form-control mt-4 w-100",type:"text",placeholder:"Kategoria...",value:e.state.category,onChange:e.onChangeCategory}),i.a.createElement("textarea",{className:"form-control mt-2",type:"text",placeholder:"Nowe pytanie...",value:e.state.question,onChange:e.onChangeQuestion}),i.a.createElement("section",{className:"d-flex mt-4 w-100"},i.a.createElement("input",{className:"form-control mr-2",type:"text",placeholder:"Odpowied\u017a... (Wymagane)",value:e.state.anA,onChange:e.onChangeAnswer,name:"a"}),i.a.createElement("input",{className:"form-control ml-2",type:"text",placeholder:"Odpowied\u017a... (Opcjonalne)",value:e.state.anB,onChange:e.onChangeAnswer,name:"b",disabled:!0})),i.a.createElement("section",{className:"d-flex mt-2 w-100"},i.a.createElement("input",{className:"form-control mr-2",type:"text",placeholder:"Odpowied\u017a... (Opcjonalne)",value:e.state.anC,onChange:e.onChangeAnswer,name:"c",disabled:!0}),i.a.createElement("input",{className:"form-control ml-2",type:"text",placeholder:"Odpowied\u017a... (Opcjonalne)",value:e.state.anD,onChange:e.onChangeAnswer,name:"d",disabled:!0})),i.a.createElement("div",{className:"d-flex flex-column align-items-center"},i.a.createElement("p",{className:"p-0 m-0 mt-4 mb-3 text-light"},"Pytanie otwarte"),i.a.createElement("input",{type:"checkbox",checked:e.state.isQuestionOpen,onChange:e.onChangeQuestionOpen}),i.a.createElement("button",{type:"button",name:"new",className:"btn btn-primary mt-4 mb-3",onClick:e.onClickAddQuestion},"Dodaj pytanie"))),i.a.createElement("section",{className:"mx-3 text-center"},t(),a(),i.a.createElement("button",{type:"button",name:"exist",className:"btn btn-primary mt-4 mb-3",onClick:e.onClickAddQuestion},"Wybierz pytanie")))):i.a.createElement("section",{className:"d-flex flex-column align-items-center"},i.a.createElement("section",{className:"my-3 d-flex quiz-input-form-container"},i.a.createElement("section",{className:"mx-3 text-center"},i.a.createElement("input",{className:"form-control mt-4",type:"text",placeholder:"Kategoria...",value:e.state.category,onChange:e.onChangeCategory}),i.a.createElement("textarea",{className:"form-control mt-2",type:"text",placeholder:"Nowe pytanie...",value:e.state.question,onChange:e.onChangeQuestion}),i.a.createElement("section",{className:"d-flex mt-4 w-100"},i.a.createElement("input",{className:"form-control mr-2",type:"text",placeholder:"Odpowied\u017a A... (Wymagane)",value:e.state.anA,onChange:e.onChangeAnswer,name:"a"}),i.a.createElement("input",{className:"form-control ml-2",type:"text",placeholder:"Odpowied\u017a B... (Wymagane)",value:e.state.anB,onChange:e.onChangeAnswer,name:"b"})),i.a.createElement("section",{className:"d-flex mt-2 w-100"},i.a.createElement("input",{className:"form-control mr-2",type:"text",placeholder:"Odpowied\u017a C... (Opcjonalne)",value:e.state.anC,onChange:e.onChangeAnswer,name:"c"}),i.a.createElement("input",{className:"form-control ml-2",type:"text",placeholder:"Odpowied\u017a D... (Opcjonalne)",value:e.state.anD,onChange:e.onChangeAnswer,name:"d"})),i.a.createElement("div",{className:"d-flex flex-column align-items-center"},i.a.createElement("p",{className:"p-0 m-0 mt-4 mb-3 text-light"},"Pytanie otwarte"),i.a.createElement("input",{type:"checkbox",checked:e.state.isQuestionOpen,onChange:e.onChangeQuestionOpen,disabled:!0}),i.a.createElement("button",{type:"button",name:"new",className:"btn btn-primary mt-4 mb-3",onClick:e.onClickAddQuestion},"Dodaj pytanie"))),i.a.createElement("section",{className:"mx-3 text-center"},t(),a(),i.a.createElement("button",{type:"button",name:"exist",className:"btn btn-primary mt-4 mb-3",onClick:e.onClickAddQuestion},"Wybierz pytanie"))))},Z=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).onChangeQuestion=n.onChangeQuestion.bind(Object(b.a)(n)),n.onChangeAnswer=n.onChangeAnswer.bind(Object(b.a)(n)),n.onChangeCategory=n.onChangeCategory.bind(Object(b.a)(n)),n.onChangePublicQuestion=n.onChangePublicQuestion.bind(Object(b.a)(n)),n.onClickAddQuestion=n.onClickAddQuestion.bind(Object(b.a)(n)),n.onClickDeleteQuestion=n.onClickDeleteQuestion.bind(Object(b.a)(n)),n.onChangeQuestionOpen=n.onChangeQuestionOpen.bind(Object(b.a)(n)),n.markAnswer=n.markAnswer.bind(Object(b.a)(n)),n.quizButton=n.quizButton.bind(Object(b.a)(n)),n.onChangeQuizDesc=n.onChangeQuizDesc.bind(Object(b.a)(n)),n.onChangeQuizCategory=n.onChangeQuizCategory.bind(Object(b.a)(n)),n.onChangeQuizDuration=n.onChangeQuizDuration.bind(Object(b.a)(n)),n.onChangeQuizStartDate=n.onChangeQuizStartDate.bind(Object(b.a)(n)),n.onChangeQuizEndDate=n.onChangeQuizEndDate.bind(Object(b.a)(n)),n.onChangeQuizTakes=n.onChangeQuizTakes.bind(Object(b.a)(n)),n.onClickQuizIsActive=n.onClickQuizIsActive.bind(Object(b.a)(n)),n.onClickQuizIsPublic=n.onClickQuizIsPublic.bind(Object(b.a)(n)),n.onClickReadyToRender=n.onClickReadyToRender.bind(Object(b.a)(n)),n.onSubmit=n.onSubmit.bind(Object(b.a)(n)),n.state={author:"",category:"",isPublic:!0,question:"",anA:"",anB:"",anC:"",anD:"",questions:[],isQuestionOpen:!1,publicQuestions:[],publicCategory:"",publicQuestion:"",publicQuestionObj:"",quizID:"",quizAuthor:x.a.get("userName"),quizCategory:"",quizDuration:"",quizStartDate:"",quizEndDate:"",quizIsActive:!0,quizDesc:"",quizIsPublic:!0,takes:"",quizUpdated:!1,readyToRender:!1,isLoggedUser:!1,isActiveUser:!1,domain:"itcrowd.net.pl"},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/users?userName="+x.a.get("userName")+"&api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){t.setState({isLoggedUser:e.data[0].isLogged,isActiveUser:e.data[0].isActive,sessionID:e.data[0].roomID})})).catch((function(e){window.location="/login"}));case 2:if(this.state.isLoggedUser&&this.state.isActiveUser||(window.location="/login"),!this.state.isLoggedUser||!this.state.isActiveUser||null==x.a.get("token")){e.next=8;break}return e.next=6,c.a.get("/questions?isPublic=true&api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){t.setState({publicQuestions:e.data})})).catch((function(e){return e}));case 6:e.next=9;break;case 8:window.location="/login";case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChangeQuestion",value:function(e){this.setState({question:e.target.value})}},{key:"onChangeAnswer",value:function(e){switch(e.target.name){case"a":this.setState({anA:e.target.value});break;case"b":this.setState({anB:e.target.value});break;case"c":this.setState({anC:e.target.value});break;case"d":this.setState({anD:e.target.value})}}},{key:"onChangeCategory",value:function(e){this.setState({category:e.target.value})}},{key:"onChangePublicQuestion",value:function(e){var t=this.state.publicQuestions.filter((function(t){return t.qstBody.replace(/^(.{45}[^\s]*).*/,"$1")===e.target.value}));this.setState({publicQuestionObj:t[0]})}},{key:"onClickAddQuestion",value:function(e){switch(e.target.name){case"new":if(this.state.question.length>0&&!this.state.isQuestionOpen&&this.state.anA.length>0&&this.state.anB.length>0&&this.state.category.length>0){var t=[{id:Math.floor(1e4*Math.random())+(new Date).toISOString(),category:this.state.category,isPublic:this.state.quizIsPublic,text:this.state.question,anA:this.state.anA,anB:this.state.anB,anC:this.state.anC,anD:this.state.anD,correct:new Set,author:x.a.get("userName"),new:!0,isOpen:this.state.isQuestionOpen}].concat(Object(A.a)(this.state.questions));this.setState({questions:t,question:"",anA:"",anB:"",anC:"",anD:""})}if(this.state.question.length>0&&this.state.isQuestionOpen&&this.state.anA.length>0&&this.state.category.length>0){var a=[{id:Math.floor(1e4*Math.random())+(new Date).toISOString(),category:this.state.category,isPublic:this.state.quizIsPublic,text:this.state.question,anA:this.state.anA,anB:this.state.anB,anC:this.state.anC,anD:this.state.anD,correct:new Set,author:x.a.get("userName"),new:!0,isOpen:this.state.isQuestionOpen}].concat(Object(A.a)(this.state.questions));this.setState({questions:a,question:"",anA:"",anB:"",anC:"",anD:""})}break;case"exist":var n=this.state.publicQuestionObj;if(n){var i={id:n.id,category:n.qstCategory,isPublic:n.isPublic,text:n.qstBody,anA:n.qstAnA,anB:n.qstAnB,anC:n.qstAnC,anD:n.qstAnD,correct:n.correctAnswers,author:n.qstAuthor,new:!0,isOpen:n.isOpen},s=[].concat(Object(A.a)(this.state.questions),[i]).filter((function(e,t,a){return a.map((function(e){return e.text})).indexOf(e.text)==t}));this.setState({questions:s,question:"",anA:"",anB:"",anC:"",anD:""})}}}},{key:"onClickDeleteQuestion",value:function(e){var t=this.state.questions.filter((function(t){return t.id!==e}));this.setState({questions:t})}},{key:"onChangeQuestionOpen",value:function(e){this.setState({isQuestionOpen:!this.state.isQuestionOpen})}},{key:"markAnswer",value:function(e,t,a){var n=this.state.questions,i=Object(A.a)(n).filter((function(t){return t.id===e}));i[0].correct=new Set(i[0].correct),i[0].correct.add(t),a&&!a.target.checked&&i[0].correct.has(a.target.name)&&i[0].correct.delete(a.target.name);var s=n.map((function(e){return e.id})).indexOf(e),o=n;o[s]=i[0],this.setState({questions:o})}},{key:"quizButton",value:function(){if(this.state.questions.length>0)return i.a.createElement("button",{type:"submit",className:"btn btn-success mb-3"},"Stw\xf3rz quiz")}},{key:"onChangeQuizDesc",value:function(e){this.setState({quizDesc:e.target.value})}},{key:"onChangeQuizCategory",value:function(e){this.setState({quizCategory:e.target.value})}},{key:"onChangeQuizDuration",value:function(e){this.setState({quizDuration:e.target.value})}},{key:"onChangeQuizStartDate",value:function(e){this.setState({quizStartDate:e.target.value})}},{key:"onChangeQuizEndDate",value:function(e){this.setState({quizEndDate:e.target.value})}},{key:"onChangeQuizTakes",value:function(e){this.setState({takes:e.target.value})}},{key:"onClickQuizIsActive",value:function(e){this.setState({quizIsActive:!this.state.quizIsActive})}},{key:"onClickQuizIsPublic",value:function(e){this.setState({quizIsPublic:!this.state.quizIsPublic})}},{key:"onClickReadyToRender",value:function(e){this.state.quizStartDate<(new Date).toISOString().substring(0,10)||this.state.quizEndDate<=(new Date).toISOString().substring(0,10)?alert("Wprowad\u017a poprawn\u0105 dat\u0119 quizu!"):this.state.quizDesc.length>0&&this.state.quizCategory.length>0&&this.setState({readyToRender:!0})}},{key:"onSubmit",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,i,s,o,r,u,l,m,h,g,b,f,k,y,w,v,q,C=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.state,n=a.questions,i=a.domain,n.forEach(function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t.id,qstAuthor:t.author,qstBody:t.text,qstAnA:t.anA,qstAnB:t.anB||null,qstAnC:t.anC||null,qstAnD:t.anD||null,qstCategory:t.category,correctAnswers:Array.from(t.correct),isPublic:t.isPublic,isOpen:t.isOpen},e.next=3,c.a.post("/questions/add?api_key=".concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3"),a,{headers:{Authorization:"JWT ".concat(x.a.get("token"))}}).then((function(e){return e})).catch((function(e){e&&401==e.response.status?(x.a.remove("token",{domain:i}),x.a.remove("userName",{domain:i}),window.location="/login"):console.log("Nope")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s=new Array,n.forEach((function(e){var t={id:e.id,author:e.author,text:e.text,anA:e.anA,anB:e.anB,anC:e.anC||null,anD:e.anD||null,category:e.category,correct:Array.from(e.correct),isPublic:e.isPublic,isOpen:e.isOpen};s=[].concat(Object(A.a)(s),[t])})),o=this.state,r=o.quizAuthor,u=o.quizCategory,l=o.quizDuration,m=o.quizStartDate,h=o.quizEndDate,g=o.quizDesc,b=o.quizIsActive,f=o.quizIsPublic,k=o.takes,y=s.map((function(e){return!0===e.new?Object(R.a)(Object(R.a)({},e),{},{new:!1}):e})),w={quizAuthor:r,quizDesc:g,quizQuestions:y,quizCategory:u,quizDuration:l,quizStartDate:m,quizEndDate:h,isActive:b,isPublic:f,takes:k},e.next=10,c.a.post("/quizes/add?api_key=".concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3"),w,{headers:{Authorization:"JWT ".concat(x.a.get("token"))}}).then((function(e){console.log(e.data._id),C.setState({quizID:e.data._id})})).catch((function(e){e&&401==e.response.status?(x.a.remove("token",{domain:i}),x.a.remove("userName",{domain:i}),window.location="/login"):console.log("Nope")}));case 10:return e.next=12,c.a.get("/users?userName="+x.a.get("userName")+"&api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){return e.data[0]._id})).catch((function(e){return e}));case 12:return v=e.sent,e.next=15,c.a.get("/users?userName="+x.a.get("userName")+"&api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){return e.data[0].quizes})).catch((function(e){return e}));case 15:return q=e.sent,e.next=18,c.a.put("/users/update/"+v+"?api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3",{quizes:[].concat(Object(A.a)(q),[this.state.quizID])}).then((function(e){return e})).catch((function(e){return e}));case 18:this.setState({category:"",isPublic:"",question:"",anA:"",anB:"",anC:"",anD:"",questions:[],publicQuestions:"",publicCategory:"",publicQuestion:"",publicQuestionObj:"",quizCategory:"",quizDuration:"",quizStartDate:"",quizEndDate:"",quizDesc:"",quizIsActive:!0,takes:"",quizUpdated:!0,readyToRender:!1});case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"questionsList",value:function(){var e=this;return this.state.questions.map((function(t){return t.new?i.a.createElement(B,{key:t.id,question:t,page:"make",markAnswer:e.markAnswer,deleteQuestion:e.onClickDeleteQuestion,faColor:"red",cursor:"pointer"}):i.a.createElement(B,{key:t.id,question:t,page:"make",markAnswer:e.markAnswer,deleteQuestion:e.onClickDeleteQuestion,faColor:"grey",cursor:"default"})}))}},{key:"render",value:function(){return this.state.isLoggedUser&&this.state.isActiveUser&&null!=x.a.get("token")?i.a.createElement("main",null,i.a.createElement("div",{className:"d-flex flex-column align-items-center list-container",style:{minHeight:"90.4vh"}},i.a.createElement("form",{className:"d-flex flex-column align-items-center mt-4 p-2 px-4 mb-4 new-quiz-form",onSubmit:this.onSubmit,style:{backgroundColor:"#575656",borderRadius:"6px"}},i.a.createElement(W,{inputForm:i.a.createElement(U,{state:this.state,onChangeCategory:this.onChangeCategory,onChangeQuestion:this.onChangeQuestion,onChangePublicQuestion:this.onChangePublicQuestion,onChangeAnswer:this.onChangeAnswer,onChangeQuestionOpen:this.onChangeQuestionOpen,onClickAddQuestion:this.onClickAddQuestion}),state:this.state,onChangeCategory:this.onChangeQuizCategory,onChangeDuration:this.onChangeQuizDuration,onChangeStartDate:this.onChangeQuizStartDate,onChangeEndDate:this.onChangeQuizEndDate,onChangeTakes:this.onChangeQuizTakes,onChangeDesc:this.onChangeQuizDesc,onClickIsActive:this.onClickQuizIsActive,onClickIsPublic:this.onClickQuizIsPublic,onClickReadyToRender:this.onClickReadyToRender}),this.questionsList(),this.quizButton()))):this.state.isLoggedUser&&this.state.isActiveUser&&null==x.a.get("userName")?void 0:i.a.createElement("main",null,i.a.createElement("div",{className:"d-flex flex-column align-items-center list-container"},i.a.createElement("h2",{className:"mt-3 text-dark"},"Nast\u0119puje przekierowanie na stron\u0119 logowania...")))}}]),a}(n.Component),M=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).onChangeQuestion=n.onChangeQuestion.bind(Object(b.a)(n)),n.onChangeAnswer=n.onChangeAnswer.bind(Object(b.a)(n)),n.onChangeCategory=n.onChangeCategory.bind(Object(b.a)(n)),n.onChangePublicQuestion=n.onChangePublicQuestion.bind(Object(b.a)(n)),n.onClickAddQuestion=n.onClickAddQuestion.bind(Object(b.a)(n)),n.onClickDeleteQuestion=n.onClickDeleteQuestion.bind(Object(b.a)(n)),n.markAnswer=n.markAnswer.bind(Object(b.a)(n)),n.quizButton=n.quizButton.bind(Object(b.a)(n)),n.onSubmit=n.onSubmit.bind(Object(b.a)(n)),n.state={category:"",isPublic:"",question:"",anA:"",anB:"",anC:"",anD:"",questions:[],publicQuestions:[],publicCategory:"",publicQuestion:"",publicQuestionObj:"",quiz:"",quizAuthor:"",takes:0,isLoggedUser:!1,isActiveUser:!1,isAdmin:!1,sessionID:"",domain:"itcrowd.net.pl"},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/users?userName=".concat(x.a.get("userName"),"&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){t.setState({isLoggedUser:e.data[0].isLogged,isActiveUser:e.data[0].isActive,isAdmin:e.data[0].isAdmin})})).catch((function(e){window.location="/login"}));case 2:return e.next=4,c.a.get("/quizes/".concat(this.props.match.params.id,"?api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){t.setState({quizAuthor:e.data.quizAuthor,isPublic:e.data.isPublic})})).catch((function(e){window.location="/login"}));case 4:if(this.state.quizAuthor!==x.a.get("userName")&&!this.state.isAdmin){e.next=15;break}if(!this.state.isLoggedUser||!this.state.isActiveUser||null==x.a.get("token")){e.next=12;break}return e.next=8,c.a.get("/questions?isPublic=true&api_key=".concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){t.setState({publicQuestions:e.data})})).catch((function(e){return e}));case 8:return e.next=10,c.a.get("/quizes/".concat(this.props.match.params.id,"?api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){t.setState({quiz:e.data,questions:e.data.quizQuestions,takes:e.data.takes})})).catch((function(e){return e}));case 10:e.next=13;break;case 12:window.location="/login";case 13:e.next=16;break;case 15:window.location="/quiz/show/"+this.props.match.params.id;case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChangeQuestion",value:function(e){this.setState({question:e.target.value})}},{key:"onChangeAnswer",value:function(e){switch(e.target.name){case"a":this.setState({anA:e.target.value});break;case"b":this.setState({anB:e.target.value});break;case"c":this.setState({anC:e.target.value});break;case"d":this.setState({anD:e.target.value})}}},{key:"onChangeCategory",value:function(e){this.setState({category:e.target.value})}},{key:"onChangePublicQuestion",value:function(e){var t=this.state.publicQuestions.filter((function(t){return t.qstBody.replace(/^(.{45}[^\s]*).*/,"$1")===e.target.value}));this.setState({publicQuestionObj:t[0]})}},{key:"onClickAddQuestion",value:function(e){switch(e.target.name){case"new":if(this.state.question.length>0&&this.state.anA.length>0&&this.state.anB.length>0&&this.state.category.length>0){var t=[{id:Math.floor(1e4*Math.random())+(new Date).toISOString(),category:this.state.category,isPublic:this.state.isPublic,text:this.state.question,anA:this.state.anA,anB:this.state.anB,anC:this.state.anC,anD:this.state.anD,correct:new Set,author:x.a.get("userName"),new:!0}].concat(Object(A.a)(this.state.questions));this.setState({questions:t,question:"",anA:"",anB:"",anC:"",anD:""})}break;case"exist":var a=this.state.publicQuestionObj;if(a){var n=[{id:a.id,category:a.qstCategory,isPublic:a.isPublic,text:a.qstBody,anA:a.qstAnA,anB:a.qstAnB,anC:a.qstAnC,anD:a.qstAnD,correct:a.correctAnswers,author:a.qstAuthor,new:!0}].concat(Object(A.a)(this.state.questions));this.setState({questions:n,question:"",anA:"",anB:"",anC:"",anD:""})}}}},{key:"onClickDeleteQuestion",value:function(e,t){if(t||this.state.isAdmin){var a=this.state.questions.filter((function(t){return t.id!==e}));this.setState({questions:a})}if(!t&&this.state.isAdmin){var n=this.state.questions.filter((function(t){return t.id!==e}));this.setState({questions:n})}else console.log("Nope")}},{key:"markAnswer",value:function(e,t,a){var n=this.state.questions,i=Object(A.a)(n).filter((function(t){return t.id===e}));i[0].correct=new Set(i[0].correct),i[0].correct.add(t),a&&!a.target.checked&&i[0].correct.has(a.target.name)&&i[0].correct.delete(a.target.name);var s=n.map((function(e){return e.id})).indexOf(e),o=n;o[s]=i[0],this.setState({questions:o})}},{key:"quizButton",value:function(){if(this.state.questions.length>0)return i.a.createElement("button",{type:"submit",className:"btn btn-success mb-3"},"Aktualizuj quiz")}},{key:"onSubmit",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,i,s,o,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.state,n=a.domain,(i=a.questions).forEach(function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t.id,qstAuthor:t.author,qstBody:t.text,qstAnA:t.anA,qstAnB:t.anB,qstAnC:t.anC||null,qstAnD:t.anD||null,qstCategory:t.category,correctAnswers:Array.from(t.correct),isPublic:t.isPublic},e.next=3,c.a.get("/questions/".concat(t.id,"?api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then(function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.put("/questions/update/".concat(t.data._id,"?api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3"),a,{headers:{Authorization:"JWT ".concat(x.a.get("token"))}}).then((function(e){return e})).catch((function(e){e&&401==e.response.status?(x.a.remove("token",{domain:n}),x.a.remove("userName",{domain:n}),window.location="/login"):console.log("Nope")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&401==t.response.status&&(x.a.remove("token",{domain:n}),x.a.remove("userName",{domain:n}),window.location="/login"),e.next=3,c.a.post("/questions/add?api_key=".concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3"),a,{headers:{Authorization:"JWT ".concat(x.a.get("token"))}}).then((function(e){return e})).catch((function(e){e&&401==e.response.status?(x.a.remove("token",{domain:n}),x.a.remove("userName",{domain:n}),window.location="/login"):console.log("Nope")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s=new Array,i.forEach((function(e){var t={id:e.id,author:e.author,text:e.text,anA:e.anA,anB:e.anB,anC:e.anC||null,anD:e.anD||null,category:e.category,correct:Array.from(e.correct),isPublic:e.isPublic,isOpen:e.isOpen};s=[].concat(Object(A.a)(s),[t])})),o=s.map((function(e){return!0===e.new?Object(R.a)(Object(R.a)({},e),{},{new:!1}):e})),r={quizQuestions:o,takes:this.state.takes+3},e.next=9,c.a.put("/quizes/update/".concat(this.props.match.params.id,"?api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3"),r,{headers:{Authorization:"JWT ".concat(x.a.get("token"))}}).then((function(e){return e})).catch((function(e){e&&401==e.response.status?(x.a.remove("token",{domain:n}),x.a.remove("userName",{domain:n}),window.location="/login"):console.log("Nope")}));case 9:this.setState({question:"",anA:"",anB:"",anC:"",anD:"",questions:[],publicQuestions:[],publicCategory:"",publicQuestion:"",publicQuestionObj:"",quiz:"",quizAuthor:"",isLoggedUser:!1,isActiveUser:!1}),window.location="/quiz/show/"+this.props.match.params.id;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"questionsList",value:function(){var e=this;if(this.state.questions.length>0)return this.state.questions.map((function(t){return t.new||e.state.isAdmin?i.a.createElement(B,{key:t.id,question:t,page:"make",markAnswer:e.markAnswer,deleteQuestion:e.onClickDeleteQuestion,faColor:"red",cursor:"pointer"}):i.a.createElement(B,{key:t.id,question:t,page:"make",markAnswer:e.markAnswer,deleteQuestion:e.onClickDeleteQuestion,faColor:"grey",cursor:"default"})}))}},{key:"render",value:function(){return this.state.isLoggedUser&&this.state.isActiveUser&&(this.state.quizAuthor==x.a.get("userName")||this.state.isAdmin)&&null!=x.a.get("token")?i.a.createElement("main",null,i.a.createElement("div",{className:"d-flex flex-column align-items-center list-container"},i.a.createElement("form",{className:"d-flex flex-column align-items-center mt-4 p-2 px-4 mb-4",onSubmit:this.onSubmit,style:{backgroundColor:"#575656",borderRadius:"6px"}},i.a.createElement("h2",{className:"mt-4 mb-0 text-light"},"Stw\xf3rz nowy quiz"),i.a.createElement(U,{state:this.state,onChangeCategory:this.onChangeCategory,onChangeQuestion:this.onChangeQuestion,onChangePublicQuestion:this.onChangePublicQuestion,onChangeAnswer:this.onChangeAnswer,onClickAddQuestion:this.onClickAddQuestion}),this.questionsList(),this.quizButton()))):this.state.isLoggedUser&&this.state.isActiveUser&&this.state.quizAuthor==x.a.get("userName")&&null!=x.a.get("token")?null:i.a.createElement("main",null,i.a.createElement("div",{className:"d-flex flex-column align-items-center list-container"},i.a.createElement("h2",{className:"mt-3 text-dark"},"Nast\u0119puje przekierowanie na stron\u0119 logowania...")))}}]),a}(n.Component);String.prototype.escapeDiac=function(){return this.replace(/\u0105/g,"a").replace(/\u0104/g,"A").replace(/\u0107/g,"c").replace(/\u0106/g,"C").replace(/\u0119/g,"e").replace(/\u0118/g,"E").replace(/\u0142/g,"l").replace(/\u0141/g,"L").replace(/\u0144/g,"n").replace(/\u0143/g,"N").replace(/\xf3/g,"o").replace(/\xd3/g,"O").replace(/\u015b/g,"s").replace(/\u015a/g,"S").replace(/\u017c/g,"z").replace(/\u017b/g,"Z").replace(/\u017a/g,"z").replace(/\u0179/g,"Z")};var K=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).onClickQuizRemove=n.onClickQuizRemove.bind(Object(b.a)(n)),n.activeList=n.activeList.bind(Object(b.a)(n)),n.onChangeTags=n.onChangeTags.bind(Object(b.a)(n)),n.onSubmit=n.onSubmit.bind(Object(b.a)(n)),n.state={tags:[],quizes:[],submited:!1,completed:!1,isAdmin:!1},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.props.location.search.length>5)){e.next=4;break}return t=this.props.history.location.search.slice(5),e.next=4,c.a.get("/quizes/search/".concat(t,"?api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){a.setState({quizes:e.data})})).catch((function(e){return e}));case 4:c.a.get("/users?userName=".concat(x.a.get("userName"),"&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){a.setState({isAdmin:e.data[0].isAdmin})})).catch((function(e){return e})),c.a.get("/quizes?page=1&isPublic=true&api_key=".concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizStartDate<=(new Date).toISOString()&&e.quizEndDate>=(new Date).toISOString()}));t.length>1&&(t=t.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),a.setState({quizes:t,pageCount:e.data.pageCount})})).catch((function(e){return e}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChangeTags",value:function(e){var t=e.target.value.split(" ");this.setState({tags:t})}},{key:"activeList",value:function(){var e=this;return this.state.quizes.map((function(t,a){return 1&a?i.a.createElement(O,{state:e.state,quiz:t,key:t._id,onClickQuizRemove:e.onClickQuizRemove,bg:"#f55072",btng:"#78d7d6",fg:"white",btngd:"#4d3ec2",fwl:"bold",ip:"right"}):i.a.createElement(O,{state:e.state,quiz:t,key:t._id,onClickQuizRemove:e.onClickQuizRemove,bg:"#78d7d6",btng:"#f55072",fg:"black",btngd:"#dc3545",ip:"left"})}))}},{key:"onClickQuizRemove",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=window.confirm("Na pewno?")){e.next=5;break}return e.next=3,c.a.delete("/quizes/remove/".concat(t,"?api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3"),{headers:{Authorization:"JWT ".concat(x.a.get("token"))}}).then((function(e){return e})).catch((function(e){return e}));case 3:e.next=6;break;case 5:alert("Wpis nie zosta\u0142 usuni\u0119ty.");case 6:null!=(a=(a=this.props.history.location.search)[a.length-1])&&this.setState({page:a}),c.a.get("/quizes?page=".concat(a,"&isPublic=true&api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){var t=e.data.quizes.filter((function(e){return e.quizStartDate<=(new Date).toISOString()&&e.quizEndDate>=(new Date).toISOString()}));t.length>1&&(t=t.sort((function(e,t){return e.lastTake<t.lastTake?1:-1}))),n.setState({quizes:t,pageCount:e.data.pageCount})})).catch((function(e){return e}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({submited:!0}),!(this.state.tags.length>0)){e.next=10;break}for(a=(a=(a=this.state.tags).join("&")).escapeDiac().replace(/[^a-zA-Z0-9&]/g,"").toLowerCase();"&"===a[a.length-1];)a=a.substring(0,a.length-1);return this.state.tags.length<=0?window.history.pushState("/quiz/find/","Quiz OKI","/quiz/find/"):window.history.pushState("/quiz/find/","Quiz OKI","/quiz/find?tag=".concat(a)),e.next=10,c.a.get("/quizes/search/".concat(a.split("&"),"?api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){n.setState({quizes:e.data,completed:!0})})).catch((function(e){return e}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return i.a.createElement("main",null,i.a.createElement("form",{className:"d-flex flex-column align-items-center mb-4",style:{marginTop:"130px"},onSubmit:this.onSubmit},i.a.createElement("h2",{className:"mt-3 text-dark"},"Wpisz interesuj\u0105ce Ci\u0119 tagi!"),i.a.createElement("div",{className:"input-group mb-3 mt-3 w-25"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Tagi...",onChange:this.onChangeTags}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Szukaj"))),this.state.tags.length<=0&&this.state.submited?i.a.createElement("p",{className:"m-0 p-0 mt-4"},"Musisz poda\u0107 jak\u0105\u015b fraz\u0119!"):null,this.state.quizes.length<=0&&this.state.submited&&this.state.completed?i.a.createElement("p",{className:"m-0 p-0 mt-4"},"Niestety nie mamy nic takiego w bazie :/"):null,this.state.quizes.length<=0&&this.state.tags.length>0&&this.state.submited&&!this.state.completed?i.a.createElement("p",{className:"m-0 p-0 mt-4"},"Przeszukujemy nasz\u0105 baz\u0119..."):null,(!(this.state.quizes.length>0)||this.state.submited&&this.state.completed,this.activeList())))}}]),a}(n.Component),H=function(e){var t=1===e.user.points?e.user.points+" punkt":e.user.points>1&&e.user.points<5?e.user.points+" punkty":e.user.points+" punkt\xf3w",a=new Array;null!=e.user.time&&(a=e.user.time.split(":"));var n=0,s=0;return n=a[0]<10||0===a[0]?"0"+a[0]:a[0],s=a[1]<10||0===a[1]?"0"+a[1]:a[1],a.length<=0&&(n="00",s="00"),i.a.createElement("section",{className:"d-flex flex-row justify-content-around align-items-center p-2 py-2 mx-auto my-1 mt-2 ranking-section",style:{backgroundColor:"#393634",color:"white",borderRadius:"6px"}},i.a.createElement("h5",{className:"text-left ranking-item ranking-username m-0"},e.user.userName),i.a.createElement("h6",{className:"text-center ranking-item m-0 p-0"},t),i.a.createElement("h6",{className:"text-left ranking-item ranking-time m-0 pr-2"},"Czas: \xa0 ",n,":",s))},$=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).rankingList=n.rankingList.bind(Object(b.a)(n)),n.state={users:[]},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/quizes?_id="+this.props.match.params.id+"&api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){return e.data.quizes[0].contributors})).catch((function(e){return e}));case 2:t=(t=(t=e.sent).sort((function(e,t){return e.time<t.time?-1:1}))).sort((function(e,t){return e.points<t.points?1:-1})),a=t.filter((function(e,t,a){return a.map((function(e){return e.userName})).indexOf(e.userName)==t})),this.setState({users:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rankingList",value:function(){return this.state.users.map((function(e){return i.a.createElement(H,{user:e,key:e.userName})}))}},{key:"render",value:function(){return this.state.users.length<=0?i.a.createElement("main",null,i.a.createElement("div",{className:"mt-5 pt-5 d-flex justify-content-center"},i.a.createElement("h1",null,"Nic tu jeszcze nie ma :c"))):i.a.createElement("main",null,i.a.createElement("div",{className:"mt-5 pt-5"},this.rankingList()))}}]),a}(n.Component),F=function(e){return i.a.createElement("form",{name:"login",className:"login-container",onSubmit:e.onSubmit,style:{backgroundColor:"#575656",borderRadius:"6px"}},i.a.createElement("style",null,"#tooltip-login, #tooltip-password {\n        visibility: hidden;\n        background-color: #222;\n        color: #fff;\n        text-align: center;\n        border-radius: 6px;\n        padding: 5px;\n        overflow-wrap: break-word;\n        position: fixed;\n        z-index: 999;\n        max-width: 385px;\n    }"),i.a.createElement("div",{className:"input-group"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("div",{className:"input-group-text my-1",id:"login-info"},"?",i.a.createElement("span",{id:"tooltip-login"},"Login mo\u017ce zawiera\u0107 jedynie litery, ",i.a.createElement("wbr",null),"cyfry oraz znak '_'"))),i.a.createElement("input",{className:"form form-control my-1",type:"text",placeholder:"Login...",onChange:e.onChangeLogin})),i.a.createElement("div",{className:"input-group mb-1"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("div",{className:"input-group-text my-1",id:"password-info"},"?",i.a.createElement("span",{id:"tooltip-password"},"Has\u0142o musi posiada\u0107 jedn\u0105 wielk\u0105 liter\u0119, ",i.a.createElement("wbr",null)," jedn\u0105 cyfr\u0119, jeden znak specjalny i \u0142\u0105cznie ",i.a.createElement("wbr",null),"mie\u0107 d\u0142ugo\u015b\u0107 o\u015bmiu znak\xf3w."))),i.a.createElement("input",{className:"form form-control my-1",type:"password",placeholder:"Has\u0142o...",onChange:e.onChangePassword})),i.a.createElement("div",{className:"login-action-buttons"},i.a.createElement("button",{className:"btn btn-primary mt-3 w-100 mr-2 text-dark",type:"submit"},e.state.loginLabel),i.a.createElement(u.b,{to:"/login/forgot",className:"btn btn-warning mt-3 w-100 ml-2"},"Zapomnia\u0142em has\u0142a")))},J=function(e){return i.a.createElement("form",{name:"register",className:"login-container",onSubmit:e.onSubmit,style:{backgroundColor:"#575656",borderRadius:"6px"}},i.a.createElement("style",null,"#tooltip-login, #tooltip-password {\n        visibility: hidden;\n        background-color: #222;\n        color: #fff;\n        text-align: center;\n        border-radius: 6px;\n        padding: 5px;\n        overflow-wrap: break-word;\n        position: fixed;\n        z-index: 999;\n        max-width: 385px;\n    }"),i.a.createElement("div",{class:"input-group"},i.a.createElement("div",{class:"input-group-prepend"},i.a.createElement("div",{class:"input-group-text",id:"login-info"},"?",i.a.createElement("span",{id:"tooltip-login"},"Login mo\u017ce zawiera\u0107 jedynie litery, ",i.a.createElement("wbr",null),"cyfry oraz znak '_'"))),i.a.createElement("input",{className:"form form-control",type:"text",placeholder:"Login...",onChange:e.onChangeLogin,value:e.state.userName})),i.a.createElement("div",{class:"input-group my-1"},i.a.createElement("div",{class:"input-group-prepend"},i.a.createElement("div",{class:"input-group-text",id:"login-info"},"?",i.a.createElement("span",{id:"tooltip-login"},"Adres email"))),i.a.createElement("input",{className:"form form-control",type:"text",placeholder:"Email...",onChange:e.onChangeEmail,value:e.state.email})),i.a.createElement("div",{className:"my-2"}),i.a.createElement("div",{class:"input-group"},i.a.createElement("div",{class:"input-group-prepend"},i.a.createElement("div",{class:"input-group-text my-1",id:"password-info"},"?",i.a.createElement("span",{id:"tooltip-password"},"Has\u0142o musi posiada\u0107 jedn\u0105 wielk\u0105 liter\u0119, ",i.a.createElement("wbr",null)," jedn\u0105 cyfr\u0119, jeden znak specjalny i \u0142\u0105cznie ",i.a.createElement("wbr",null),"mie\u0107 d\u0142ugo\u015b\u0107 o\u015bmiu znak\xf3w."))),i.a.createElement("input",{className:"form form-control my-1",type:"password",placeholder:"Has\u0142o...",onChange:e.onChangePassword,value:e.state.password})),i.a.createElement("div",{class:"input-group mb-3"},i.a.createElement("div",{class:"input-group-prepend"},i.a.createElement("div",{class:"input-group-text",id:"password-info"},"?",i.a.createElement("span",{id:"tooltip-password"},"Has\u0142o musi posiada\u0107 jedn\u0105 wielk\u0105 liter\u0119, ",i.a.createElement("wbr",null)," jedn\u0105 cyfr\u0119, jeden znak specjalny i \u0142\u0105cznie ",i.a.createElement("wbr",null),"mie\u0107 d\u0142ugo\u015b\u0107 o\u015bmiu znak\xf3w."))),i.a.createElement("input",{className:"form form-control",type:"password",placeholder:"Powt\xf3rz has\u0142o...",onChange:e.onChangePasswordConf,value:e.state.confirmPassword})),i.a.createElement("div",{className:"my-2"}),i.a.createElement("div",{class:"input-group"},i.a.createElement("div",{class:"input-group-prepend"},i.a.createElement("div",{class:"input-group-text",id:"password-info"},"?",i.a.createElement("span",{id:"tooltip-password"},"Twoje imi\u0119"))),i.a.createElement("input",{className:"form form-control",type:"text",placeholder:"Imi\u0119...",onChange:e.onChangeFirstName,value:e.state.firstName})),i.a.createElement("div",{class:"input-group my-1"},i.a.createElement("div",{class:"input-group-prepend"},i.a.createElement("div",{class:"input-group-text",id:"login-info"},"?",i.a.createElement("span",{id:"tooltip-login"},"Data urodzenia"))),i.a.createElement("input",{className:"form form-control",type:"date",placeholder:"Data urodzenia...",onChange:e.onChangeBirthDate,value:e.state.birthDate})),i.a.createElement("div",{class:"input-group my-1"},i.a.createElement("div",{class:"input-group-prepend"},i.a.createElement("div",{class:"input-group-text",id:"login-info"},"?",i.a.createElement("span",{id:"tooltip-login"},"Sk\u0105d jeste\u015b?"))),i.a.createElement("input",{className:"form form-control",type:"text",placeholder:"Miasto...",onChange:e.onChangeCity,value:e.state.city})),i.a.createElement("button",{className:"btn btn-primary mt-3 w-100 text-dark",type:"submit"},"Zarejestruj si\u0119"))},G=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).onClickFormChange=n.onClickFormChange.bind(Object(b.a)(n)),n.onChangeLogin=n.onChangeLogin.bind(Object(b.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(b.a)(n)),n.onChangePasswordConf=n.onChangePasswordConf.bind(Object(b.a)(n)),n.onChangeEmail=n.onChangeEmail.bind(Object(b.a)(n)),n.onChangeFirstName=n.onChangeFirstName.bind(Object(b.a)(n)),n.onChangeBirthDate=n.onChangeBirthDate.bind(Object(b.a)(n)),n.onChangeCity=n.onChangeCity.bind(Object(b.a)(n)),n.onSubmit=n.onSubmit.bind(Object(b.a)(n)),n.state={domain:"oki.org.pl",loginLabel:"Zaloguj si\u0119",login:!0,register:!1,logged:!1,registered:!1,userName:"",password:"",confirmPassword:"",email:"",firstName:"",birthDate:new Date,city:"",wt:"",et:"",st:""},n}return Object(g.a)(a,[{key:"onClickFormChange",value:function(e){"login"===e.target.name?this.setState({login:!0,register:!1}):this.setState({login:!1,register:!0})}},{key:"onChangeLogin",value:function(e){this.setState({userName:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onChangePasswordConf",value:function(e){this.setState({confirmPassword:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangeFirstName",value:function(e){this.setState({firstName:e.target.value})}},{key:"onChangeBirthDate",value:function(e){this.setState({birthDate:e.target.value})}},{key:"onChangeCity",value:function(e){this.setState({city:e.target.value})}},{key:"onSubmit",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,i,s,o,r,u,l,m,h,g,b=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"register"!==t.target.name){e.next=23;break}return a=!1,n=!1,i=!1,s=!1,new RegExp("^[a-zA-Z0-9_]{2,}[a-zA-Z]+[0-9]*$").test(this.state.userName)?a=!0:(this.setState({wt:"Login musi mie\u0107 minimum trzy znaki!"}),this.setState({userName:"",password:"",confirmPassword:""})),/\S+@\S+\.\S+/.test(this.state.email)?n=!0:(this.setState({wt:"Podaj prawid\u0142owy adres email!"}),this.setState({email:"",password:"",confirmPassword:""})),(o=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})")).test(this.state.password)&&o.test(this.state.confirmPassword)?i=!0:(this.setState({wt:"Has\u0142o musi sk\u0142ada\u0107 si\u0119 z co najmniej jednej ma\u0142ej litery, jednej du\u017cej, jednej cyfry, jednego znaku specjalnego i mie\u0107 d\u0142ugo\u015b\u0107 przynajmniej o\u015bmiu znak\xf3w!"}),this.setState({password:"",confirmPassword:""})),this.state.password===this.state.confirmPassword?s=!0:(this.setState({wt:"Has\u0142a nie s\u0105 jednakowe!"}),this.setState({password:"",confirmPassword:""})),r=!1,e.next=13,c.a.get("/users?userName="+this.state.userName+"&api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){return!(e.data[0].userName.length>0)})).catch((function(e){return r=!0}));case 13:return(r=e.sent)||(this.setState({wt:"Nazwa u\u017cytkownika jest ju\u017c zajeta!"}),this.setState({userName:"",password:"",confirmPassword:""})),u=!1,e.next=18,c.a.get("/users?email="+this.state.email+"&api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){return!(e.data[0].email.length>0)})).catch((function(e){return u=!0}));case 18:(u=e.sent)||(this.setState({et:"Pod danym adresem email istnieje ju\u017c konto!"}),this.setState({email:"",password:"",confirmPassword:""})),a&&n&&i&&s&&r&&u&&(l={userName:this.state.userName,email:this.state.email,firstName:this.state.firstName,password:this.state.password,confirmPassword:this.state.confirmPassword,birthDate:this.state.birthDate,city:this.state.city,isLogged:!1,roomID:"NONE",isActive:!1,domain:"quiz"},c.a.post("/users/add?api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3",l).then((function(e){return e})).catch((function(e){return e})),this.setState({userName:"",password:"",confirmPassword:"",city:"",birthDate:"",firstName:"",register:!1,registered:!0,login:!0,et:"",wt:"",st:""})),e.next=32;break;case 23:return this.setState({loginLabel:"Logowanie..."}),m={userName:this.state.userName,password:this.state.password},e.next=27,c.a.get("/users?userName="+this.state.userName+"&api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){return e.data[0].isActive})).catch((function(e){b.setState({password:"",et:"Has\u0142o lub login nieprawid\u0142owe!",loginLabel:"Jeszcz raz?"})}));case 27:return h=e.sent,e.next=30,c.a.get("/users?userName="+this.state.userName+"&api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3").then((function(e){return e.data[0].email})).catch((function(e){b.setState({password:"",et:"Has\u0142o lub login nieprawid\u0142owe!",loginLabel:"Jeszcz raz?"})}));case 30:g=e.sent,c.a.post("/users/check?api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3",m).then(function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=9;break}return e.next=3,c.a.put("/users/update/"+t.data.id+"?api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3",{isLogged:!0});case 3:x.a.set("token",t.data.token,{domain:b.state.domain,secure:!0,expires:1,samesite:"strict"}),x.a.set("userName",b.state.userName,{domain:b.state.domain,secure:!0,expires:1,samesite:"strict"}),b.setState({logged:!0,et:"",wt:"",st:"Zalogowano pomy\u015blnie!"}),b.state.logged&&(window.location="/"),e.next=10;break;case 9:b.setState({login:!0,register:!1,registered:!0,email:g});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e&&401==e.response.status&&b.setState({password:"",et:"Has\u0142o lub login nieprawid\u0142owe!",loginLabel:"Jeszcz raz?"}),e&&403==e.response.status&&b.setState({login:!0,register:!1,registered:!0,email:g,loginLabel:"Najpierw aktywuj konto!"})}));case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.login&&!this.state.registered?i.a.createElement("main",null,i.a.createElement("section",{className:"form-container"},this.state.et.length>0?i.a.createElement("div",{class:"btn btn-danger text-bold w-100 em",style:{position:"fixed",top:"82px"},disabled:!0},this.state.et):null,this.state.wt.length>0?i.a.createElement("div",{class:"btn btn-warning w-100 wm",style:{position:"fixed",top:"82px"},disabled:!0},this.state.wt):null,this.state.st.length>0?i.a.createElement("div",{class:"btn btn-success w-100 sm",style:{position:"fixed",top:"82px"},disabled:!0},this.state.st):null,i.a.createElement("div",{className:"action-buttons"},i.a.createElement("input",{className:"login-button",name:"login",type:"button",value:"Logowanie",style:{backgroundColor:"#d9dada"},onClick:this.onClickFormChange,required:!0}),i.a.createElement("input",{className:"login-button",name:"register",type:"button",value:"Rejestracja",style:{backgroundColor:"#e9476a"},onClick:this.onClickFormChange,required:!0})),i.a.createElement(F,{state:this.state,onChangeLogin:this.onChangeLogin,onChangePassword:this.onChangePassword,onSubmit:this.onSubmit}))):this.state.login&&this.state.registered?i.a.createElement("main",null,i.a.createElement("section",{className:"form-container"},this.state.et.length>0?i.a.createElement("div",{class:"btn btn-danger text-bold w-100 em",style:{position:"fixed",top:"82px"},disabled:!0},this.state.et):null,this.state.wt.length>0?i.a.createElement("div",{class:"btn btn-warning w-100 wm",style:{position:"fixed",top:"82px"},disabled:!0},this.state.wt):null,this.state.st.length>0?i.a.createElement("div",{class:"btn btn-success w-100 sm",style:{position:"fixed",top:"82px"},disabled:!0},this.state.st):null,i.a.createElement("div",{className:"action-buttons"},i.a.createElement("input",{className:"login-button",name:"login",type:"button",value:"Logowanie",style:{backgroundColor:"#d9dada"},onClick:this.onClickFormChange,required:!0}),i.a.createElement("input",{className:"login-button",name:"register",type:"button",value:"Rejestracja",style:{backgroundColor:"#e9476a"},onClick:this.onClickFormChange,required:!0})),i.a.createElement(F,{state:this.state,onChangeLogin:this.onChangeLogin,onChangePassword:this.onChangePassword,onSubmit:this.onSubmit}),i.a.createElement("section",{className:"mail-info"},"Na adres ",this.state.email," zosta\u0142a wys\u0142ana wiadomo\u015b\u0107 z potwierdzeniem rejestracji!"))):i.a.createElement("main",null,i.a.createElement("section",{className:"form-container"},this.state.et.length>0?i.a.createElement("div",{class:"btn btn-danger text-bold w-100 em",style:{position:"fixed",top:"82px"},disabled:!0},this.state.et):null,this.state.wt.length>0?i.a.createElement("div",{class:"btn btn-warning w-100 wm",style:{position:"fixed",top:"82px"},disabled:!0},this.state.wt):null,this.state.st.length>0?i.a.createElement("div",{class:"btn btn-success w-100 sm",style:{position:"fixed",top:"82px"},disabled:!0},this.state.st):null,i.a.createElement("div",{className:"action-buttons"},i.a.createElement("input",{className:"login-button",name:"login",type:"button",value:"Logowanie",style:{backgroundColor:"#e9476a"},onClick:this.onClickFormChange,required:!0}),i.a.createElement("input",{className:"login-button",name:"register",type:"button",value:"Rejestracja",style:{backgroundColor:"#d9dada"},onClick:this.onClickFormChange,required:!0})),i.a.createElement(J,{state:this.state,onChangeLogin:this.onChangeLogin,onChangeEmail:this.onChangeEmail,onChangePassword:this.onChangePassword,onChangePasswordConf:this.onChangePasswordConf,onChangeFirstName:this.onChangeFirstName,onChangeBirthDate:this.onChangeBirthDate,onChangeCity:this.onChangeCity,onSubmit:this.onSubmit})))}}]),a}(n.Component),V=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={active:!1},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.a.put("/users/update/"+this.props.match.params.id+"?api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3",{isActive:!0}).then((function(e){t.setState({active:!0})})).catch((function(e){return e})),setTimeout((function(){window.location="/login"}),2500);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.active?i.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"}},i.a.createElement("section",{className:"w-25 text-light text-center mt-4 p-3 h-auto",style:{border:"1px solid grey",backgroundColor:"#53bdc1",fontWeight:"bold",borderRadius:"6px"}},"Konto zosta\u0142o aktywowane! Zaraz zostaniesz przekierowany...")):i.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"}},i.a.createElement("section",{className:"w-25 text-light text-center mt-4 p-3 h-auto",style:{border:"1px solid grey",backgroundColor:"#53bdc1",fontWeight:"bold",borderRadius:"6px"}},"Trwa aktywacja konta! Prosz\u0119 czeka\u0107..."))}}]),a}(n.Component),X=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).onChangeEmail=n.onChangeEmail.bind(Object(b.a)(n)),n.onClickResetPassword=n.onClickResetPassword.bind(Object(b.a)(n)),n.state={email:"",resetOK:!1,trigger:!1},n}return Object(g.a)(a,[{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onClickResetPassword",value:function(e){var t=this;e.target.value="Prosz\u0119 czeka\u0107...",c.a.post("/users/forgot?api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3",{email:this.state.email,domain:"quiz"}).then((function(e){200===e.status?t.setState({resetOK:!0}):t.setState({resetOK:!1,trigger:!0})})).catch((function(e){alert("Nie istnieje konto z takim adresem email!"),t.setState({email:""})})),this.state.trigger&&(e.target.value="Resetuj has\u0142o")}},{key:"render",value:function(){return this.state.resetOK?i.a.createElement("main",null,i.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"130px"}},i.a.createElement("section",{className:"w-25 text-light text-center mt-4 p-3 h-auto reset-window",style:{border:"1px solid grey",backgroundColor:"#53bdc1",fontWeight:"bold",borderRadius:"6px"}},"Na adres ",this.state.email," wys\u0142ano wiadomo\u015b\u0107 z potwierdzeniem resetu has\u0142a!"))):i.a.createElement("main",null,i.a.createElement("div",{className:"text-light text-center mx-auto",style:{marginTop:"130px"}},i.a.createElement("div",{className:"d-flex flex-column align-items-center mt-5 p-2 px-4 pb-3 reset-window",style:{backgroundColor:"#575656",borderRadius:"6px"}},i.a.createElement("h4",{className:"mt-3"},"Podaj adres email swojego konta"),i.a.createElement("div",{className:"form-inline mt-3"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Email...",value:this.state.email,onChange:this.onChangeEmail}),i.a.createElement("input",{type:"submit",className:"btn btn-primary",onClick:this.onClickResetPassword,value:"Resetuj has\u0142o"})))))}}]),a}(n.Component),Y=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).onChangePassword=n.onChangePassword.bind(Object(b.a)(n)),n.onSubmit=n.onSubmit.bind(Object(b.a)(n)),n.state={password:"",confirmPassword:"",canChange:!1},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/users/".concat(this.props.match.params.id,"?api_key=").concat("b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3")).then((function(e){e.data.unique===t.props.match.params.unique&&-1!==e.data.unique&&t.setState({canChange:!0})})).catch((function(e){return e}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChangePassword",value:function(e){switch(e.target.name){case"pass":this.setState({password:e.target.value});break;case"pass-conf":this.setState({confirmPassword:e.target.value})}}},{key:"onSubmit",value:function(e){e.preventDefault();var t=!1,a=!1,n=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})");n.test(this.state.password)&&n.test(this.state.confirmPassword)?t=!0:(alert("Has\u0142o musi sk\u0142ada\u0107 si\u0119 z co najmniej jednej ma\u0142ej litery, jednej du\u017cej, jednej cyfry, jednego znaku specjalnego i mie\u0107 d\u0142ugo\u015b\u0107 przynajmniej o\u015bmiu znak\xf3w!"),this.setState({password:"",confirmPassword:""})),this.state.password===this.state.confirmPassword?a=!0:(alert("Has\u0142a nie s\u0105 jednakowe!"),this.setState({password:"",confirmPassword:""})),t&&a&&c.a.put("/users/update/"+this.props.match.params.id+"?api_key=b229aeb39d4eadc6809214dd64737e151649585bb4dd8ccf7ab4ef76c8c926d3",{password:this.state.password,confirmPassword:this.state.confirmPassword,expiresIn:(new Date).toISOString().substr(0,10)}).then((function(e){200===e.status?window.location="/login":window.location="/login/forgot"})).catch((function(e){403===e.response.status&&alert("Nie masz uprawnie\u0144 do zmiany has\u0142a!")}))}},{key:"render",value:function(){return this.state.canChange?i.a.createElement("div",{className:"mt-5 pt-5 text-light text-center d-flex flex-column align-items-center",style:{height:"90vh"}},i.a.createElement("form",{name:"login",className:"d-flex flex-column w-25 mt-5 p-2 px-4 pb-3",onSubmit:this.onSubmit,style:{backgroundColor:"#575656",borderRadius:"6px"}},i.a.createElement("input",{className:"form form-control my-1",type:"password",placeholder:"Nowe has\u0142o...",name:"pass",onChange:this.onChangePassword,value:this.state.password}),i.a.createElement("input",{className:"form form-control my-1",type:"password",placeholder:"Powt\xf3rz nowe has\u0142o...",name:"pass-conf",onChange:this.onChangePassword,value:this.state.confirmPassword}),i.a.createElement("button",{className:"btn btn-primary mt-3 w-100 mr-2",type:"submit"},"Resetuj has\u0142o"))):i.a.createElement("div",{className:"mt-5 pt-5 text-light text-center d-flex flex-column align-items-center",style:{height:"90vh"}},i.a.createElement("form",{className:"d-flex flex-column w-25 mt-5 px-4 p-3",style:{backgroundColor:"#575656",borderRadius:"6px"}},i.a.createElement("h2",null,"Nie masz uprawnie\u0144 do resetu tego has\u0142a!")))}}]),a}(n.Component);var ee=function(){return i.a.createElement(u.a,null,i.a.createElement(w,null),i.a.createElement(l.c,null,i.a.createElement(l.a,{exact:!0,path:"/",component:j}),i.a.createElement(l.a,{path:"/quizes/active/",component:D}),i.a.createElement(l.a,{path:"/quizes/coming-soon/",component:Q}),i.a.createElement(l.a,{path:"/quizes/completed/",component:P}),i.a.createElement(l.a,{exact:!0,path:"/quiz/show/:id",component:L}),i.a.createElement(l.a,{exact:!0,path:"/quiz/add/",component:Z}),i.a.createElement(l.a,{exact:!0,path:"/quiz/edit/:id",component:M}),i.a.createElement(l.a,{exact:!0,path:"/quiz/find/",component:K}),i.a.createElement(l.a,{exact:!0,path:"/ranking/:id",component:$}),i.a.createElement(l.a,{exact:!0,path:"/login/",component:G}),i.a.createElement(l.a,{path:"/login/forgot/",component:X}),i.a.createElement(l.a,{exact:!0,path:"/reset/:id/:unique",component:Y}),i.a.createElement(l.a,{exact:!0,path:"/confirm/:id",component:V}),i.a.createElement(l.a,{component:v})))};c.a.defaults.baseURL="https://back.oki.org.pl/api",o.a.render(i.a.createElement(ee,null),document.querySelector("#root"))}},[[44,1,2]]]);